<product-info
  id="MainProduct-{{ section.id }}"
  class="section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}"
  data-section="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-update-url="true"
  data-url="{{ product.url }}"
  {% if section.settings.image_zoom == 'hover' %}
    data-zoom-on-hover
  {% endif %}
>
  {{ 'section-main-product.css' | asset_url | stylesheet_tag }}
  {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-slider.css' | asset_url | stylesheet_tag }}
  {{ 'component-rating.css' | asset_url | stylesheet_tag }}
  {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

  {% unless product.has_only_default_variant %}
    {{ 'component-product-variant-picker.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}
    {{ 'component-swatch.css' | asset_url | stylesheet_tag }}
  {% endunless %}
  {%- if product.quantity_price_breaks_configured? -%}
    {{ 'component-volume-pricing.css' | asset_url | stylesheet_tag }}
  {%- endif -%}

  {%- style -%}
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    }

    @media screen and (min-width: 750px) {
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
      }
    }
    @media screen and (max-width:750px){
     .impact-note__icon img{
       height: 50px;
       width: auto;
     }
     .impact-note__text {
       font-size: 12px;
     }
    }
    .secure-checkout{
      line-height: 0;
    }
    .pay-badges {
      display: flex;
      align-items: center;
      gap: 9.55px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .pay-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        line-height: 0;
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        width: 36px;
    }
    .pay-badge img {
        width: 100%;
    }
    .pit-copy {
      font-size: 14px;
    }
    #shopify-section-{{ section.id  }} .accordion__content.rte{
      font-size: 14px;
    }
    /* --- Global Styles --- */
    .rh-wrap { margin: 0 0; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 15px; }
    .rh-head { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
    .rh-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; background: #333; }
    .rh-name { font-weight: bold; font-size: 14px; }
    .rh-role { font-size: 12px; opacity: 0.8; }
    .rh-text { font-size: 13px; font-style: italic; margin: 0; opacity: 0.9; }
    .rh-stars svg { width: 18px; height: 18px; color: #B57C46; }

    .shipbar { display: flex; align-items: center; gap: 15px; padding: 12px; border-radius: 8px; margin: 15px 0; font-size: 13px; border: 1px solid rgba(0,0,0,0.1); }
    @media screen and (max-width: 750px){ .shipbar{ flex-direction: column; align-items: flex-start; } }
    .shipbar__label { font-weight: 700;  }
    .shipbar__value { font-weight: 500; font-size: 15px; margin-left: 5px; }
    .shipbar__list { display: flex; gap: 15px; flex-wrap: wrap; }
    .shipbar__item { display: flex; align-items: center; gap: 5px; opacity: 0.8; }

    .pf-wrap { margin: 20px 0; }
    .pf-track { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
    .pf-track::-webkit-scrollbar { display: none; }
    .pf-item { min-width: 80px; text-align: center; flex: 0 0 auto; }
    .pf-icon img { margin: 0 auto; display: block; width: 40px; height: 40px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.1);  object-fit: contain;}
    .pf-text { font-size: 11px; margin-top: 8px; line-height: 1.2; }
    .pf-progress { height: 4px; background: rgba(0,0,0,0.1); border-radius: 2px; margin-top: 10px; overflow: hidden; display: none; }
    .pf-bar { height: 100%; background: currentColor; width: 0%; transition: width 0.1s; }
    @media (max-width: 768px) { .pf-progress { display: block; } }

    .sticky-cta {
      position: fixed; bottom: 20px; right: 20px; background: #121212; color: #fff;
      padding: 12px; border-radius: 12px; z-index: 999; display: flex; gap: 15px; align-items: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: translateY(150%); transition: transform 0.3s ease;
      max-width: 400px; width: calc(100% - 40px);
    }
    .sticky-cta.is-visible { transform: translateY(0); }
    @media (max-width: 750px) {
      .sticky-cta { bottom: 0; right: 0; left: 0; width: 100%; max-width: none; border-radius: 0; padding: 15px; }
      .sticky-cta__img, .sticky-cta__text { display: none; }
      .sticky-cta__btn { width: 100%; }
    }

    .upsell-card { display: flex; background: #fff; border-radius: 10px; padding: 10px; gap: 15px; align-items: center; color: #121212; margin-bottom: 10px; }
    .upsell-card__media { width: 80px; height: 80px; flex-shrink: 0; }
    .upsell-card__media img { width: 100%; height: 100%; object-fit: cover; border-radius: 8px; }
    .upsell-card__main { flex: 1; }
    .upsell-card__name { font-size: 14px; font-weight: 600; margin: 0 0 5px; color: #000; }
    .upsell-price-with-button { display: flex; justify-content: space-between; align-items: center; }
    .upsell-card__price { font-size: 16px; font-weight: 600; color: #000; }
    .upsell-card__atc { background: #A3835F; color: #fff; border: none; padding: 6px 14px; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px; }

    .pit-tabs { display: grid; grid-template-columns: repeat(3, 1fr); border-bottom: 1px solid rgba(0,0,0,0.1); margin-bottom: 20px; }
    .pit-tab { background: transparent; border: none; padding: 15px 5px; cursor: pointer; color: inherit; opacity: 0.6; font-size: 14px; font-weight: 500; position: relative; }
    .pit-tab.is-active { opacity: 1; }
    .pit-underline { height: 2px; width: 100%; background: currentColor; position: absolute; bottom: 0; opacity: 0; transition: 0.3s; }
    .pit-tab.is-active .pit-underline { opacity: 1; }
    .pit-panel { display: none; }
    .pit-panel.is-active { display: block; animation: fadeIn 0.5s; }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

    /* Size Guide */
    .sg-modal {
      position: fixed; inset: 0; z-index: 2147483647;
      display: none; align-items: center; justify-content: center;
      background: rgba(0,0,0,0.5); backdrop-filter: blur(2px);
    }
    .sg-modal.is-open { display: flex !important; }
    .sg-content { background: #fff; padding: 30px; border-radius: 12px; position: relative; max-width: 600px; width: 90%; color: #000; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
    .sg-switch-wrap { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; justify-content: flex-end; }
    .sg-btn-switch { padding: 5px 10px; border: 1px solid #000; background: #fff; cursor: pointer; font-size: 12px; border-radius: 4px; }
    .sg-btn-switch.active { background: #000; color: #fff; }
  {%- endstyle -%}

  <script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
  {%- if product.quantity_price_breaks_configured? -%}
    <script src="{{ 'show-more.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'price-per-item.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {% if section.settings.image_zoom == 'hover' %}
    <script id="EnableZoomOnHover-main" src="{{ 'magnify.js' | asset_url }}" defer="defer"></script>
  {% endif %}
  {%- if request.design_mode -%}
    <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
  {%- endif -%}

  {%- assign first_3d_model = product.media | where: 'media_type', 'model' | first -%}
  {%- if first_3d_model -%}
    {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
    <link
      id="ModelViewerStyle"
      rel="stylesheet"
      href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css"
      media="print"
      onload="this.media='all'"
    >
    <link
      id="ModelViewerOverride"
      rel="stylesheet"
      href="{{ 'component-model-viewer-ui.css' | asset_url }}"
      media="print"
      onload="this.media='all'"
    >
  {%- endif -%}

  {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}
  <div class="page-width">
    <div class="product product--{{ section.settings.media_size }} product--{{ section.settings.media_position }} product--{{ section.settings.gallery_layout }} product--mobile-{{ section.settings.mobile_thumbnails }} grid grid--1-col {% if product.media.size > 0 %}grid--2-col-tablet{% else %}product--no-media{% endif %}">
      <div class="grid__item product__media-wrapper">
        {% render 'product-media-gallery', variant_images: variant_images %}
      </div>
      <div class="product__info-wrapper grid__item{% if settings.page_width > 1400 and section.settings.media_size == "small" %} product__info-wrapper--extra-padding{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        <section
          id="ProductInfo-{{ section.id }}"
          class="product__info-container{% if section.settings.enable_sticky_info %} product__column-sticky{% endif %}"
        >
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when '@app' -%}
                {% render block %}

              {%- when 'text' -%}
                <div id="block-{{ block.id }}" style="margin-bottom: 12px;">
                  <style>
                    #block-{{ block.id }} .product__text {
                      color: {{ block.settings.color_text }} !important;
                      font-size: {{ block.settings.font_size }}px !important;
                    }
                  </style>
                  <p
                    class="product__text inline-richtext{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}"
                    {{ block.shopify_attributes }}
                  >
                    {{- block.settings.text -}}
                  </p>
                </div>

              {%- when 'title' -%}
                <div id="block-{{ block.id }}" class="product__title" {{ block.shopify_attributes }}>
                  <style>
                    #block-{{ block.id }} h1 {
                      color: {{ block.settings.color_text }} !important;
                      font-size: {{ block.settings.font_size }}px !important;
                    }
                    @media(max-width: 768px) {
                        #block-{{ block.id }} h1 { font-size: 28px !important; }
                    }
                  </style>
                  <h1 class="product_title">
                    {{ product.title | escape }}
                    {% if product.metafields.custom.pieces_count %}
                      <span style=" color: #D4C7B4;"> {{ product.metafields.custom.pieces_count }} </span>
                    {% endif %}
                  </h1>
                  <a href="{{ product.url }}" class="product__title">
                    <h2 class="h1">
                      {{ product.title | escape }}
                      {% if product.metafields.custom.pieces_count %}
                        <span style=" color: #D4C7B4;">{{ product.metafields.custom.pieces_count }} </span>
                      {% endif %}
                    </h2>
                  </a>
                </div>
                <style>
                  /* Custom Rating CSS - Fast Loading */
                  .custom-rating-link {
                    text-decoration: none;
                    display: inline-flex;
                    align-items: center;
                    gap: 5px; /* Stars aur text ke darmiyan gap */
                    cursor: pointer;
                    margin: -5px 0px;
                    padding: 0px;
                  }

                  .custom-stars-wrapper {
                    display: flex;
                    align-items: center;
                  }

                  .custom-star-icon {
                    width: 18px; /* Star ka size */
                    height: 18px;
                    fill: rgb(181, 124, 70); /* Golden Color jo aapne diya tha */
                  }

                  .custom-rating-text {
                    font-size: 16px;
                    color: #ffffff; /* Text color white */
                    font-family: inherit;
                    font-weight: normal;
                  }

                  /* Hover effect (Optional) */
                  .custom-rating-link:hover {
                    opacity: 0.8;
                  }
                </style>

                <a href="#reviews" class="custom-rating-link">
                  <div class="custom-stars-wrapper">
                    <svg class="custom-star-icon" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <svg class="custom-star-icon" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <svg class="custom-star-icon" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <svg class="custom-star-icon" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <svg class="custom-star-icon" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                  </div>

                  <span class="custom-rating-text"> &nbsp;4.8&nbsp;- (1532) </span>
                </a>
              {%- when 'shipping_promise_bar' -%}
                {%- comment -%} --- DATE CALCULATION LOGIC START --- {%- endcomment -%}
                {%- assign seconds_in_day = 86400 -%}
                {%- comment -%} 'now' gets current time, plus 86400 adds 1 day. Format "%b %d" results in 'Jan 07' {%- endcomment -%}
                {%- assign estimated_date = 'now' | date: '%s' | plus: seconds_in_day | date: '%b %d' -%}
                {%- comment -%} --- DATE CALCULATION LOGIC END --- {%- endcomment -%}

                <div id="shipbar-{{ block.id }}" class="shipbar" {{ block.shopify_attributes }}>
                  <div class="shipbar__inner">
                    <div class="shipbar__left">
                      <div class="shipbar__label">{{ block.settings.label_text }}</div>

                      {%- comment -%} Updated line below to use the dynamic variable instead of settings text {%- endcomment -%}
                      <div class="shipbar__value">{{ estimated_date }}</div>
                    </div>
                    <div class="shipbar__listwrap">
                      <ul class="shipbar__list" role="list">
                        {%- for i in (1..4) -%}
                          {%- capture icon_img -%}icon_{{ i }}{%- endcapture -%}
                          {%- capture icon_txt -%}text_{{ i }}{%- endcapture -%}
                          {%- capture default_img -%}default_icon_{{ i }}{%- endcapture -%}

                          {%- assign image = block.settings[icon_img] -%}
                          {%- assign text = block.settings[icon_txt] -%}
                          {%- assign def_url = block.settings[default_img] -%}

                          {%- if text != blank -%}
                            <li class="shipbar__item">
                              {%- if image != blank -%}
                                <img
                                  class="shipbar__icon"
                                  src="{{ image | img_url: '50x' }}"
                                  alt="{{ text }}"
                                  width="{{ block.settings.icon_size }}"
                                  height="{{ block.settings.icon_size }}"
                                  loading="lazy"
                                >
                              {%- elsif def_url != blank -%}
                                <img
                                  class="shipbar__icon"
                                  src="{{ def_url }}"
                                  alt="{{ text }}"
                                  width="{{ block.settings.icon_size }}"
                                  height="{{ block.settings.icon_size }}"
                                  loading="lazy"
                                >
                              {%- endif -%}
                              <span class="shipbar__text">{{ text }}</span>
                            </li>
                          {%- endif -%}
                        {%- endfor -%}
                      </ul>
                    </div>
                  </div>
                </div>

                <style>
                  #shipbar-{{ block.id }} {
                    margin: {{ block.settings.margin_top }}px 0 {{ block.settings.margin_bottom }}px 0;
                  }
                  #shipbar-{{ block.id }} .shipbar__inner {
                    background: {{ block.settings.bg_color }};
                    border-radius: 12px;
                    display: flex;
                    align-items: stretch;
                    overflow: hidden;
                    padding: 11px 0;
                    border: 1px solid {{ block.settings.border_color }};
                  }

                  /* Left Side Styles */
                  #shipbar-{{ block.id }} .shipbar__left {
                    min-width: 132px;
                    padding: 12px 41px;
                    border-right: 1px solid {{ block.settings.divider_color }};
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                  }
                  #shipbar-{{ block.id }} .shipbar__label {
                    color: {{ block.settings.label_color }};
                    font-family: 'Neue Montreal', sans-serif;
                    font-weight: 500;
                    font-size: {{ block.settings.fs_label }}px;
                    line-height: 140%;
                    letter-spacing: 0.02em;
                    text-transform: capitalize;
                  }
                  #shipbar-{{ block.id }} .shipbar__value {
                    color: {{ block.settings.date_color }};
                    font-family: 'Neue Montreal', sans-serif;
                    font-weight: 500;
                    font-size: {{ block.settings.fs_date }}px;
                    line-height: 140%;
                    letter-spacing: 0.02em;
                    text-transform: capitalize;
                    margin-top: 8px;
                  }

                  /* Right Side Styles */
                  #shipbar-{{ block.id }} .shipbar__listwrap { flex: 1; overflow: hidden; display: flex; }
                  #shipbar-{{ block.id }} .shipbar__list {
                    display: flex;
                    align-items: center;
                    flex-wrap: nowrap;
                    gap: 20px;
                    padding: 16px 40px;
                    margin: 0;
                    list-style: none;
                  }
                  #shipbar-{{ block.id }} .shipbar__item {
                    display: flex; align-items: center; gap: 8px; position: relative;
                  }
                  #shipbar-{{ block.id }} .shipbar__icon {
                    width: {{ block.settings.icon_size }}px;
                    height: {{ block.settings.icon_size }}px;
                    display: block;
                    object-fit: contain;
                  }
                  #shipbar-{{ block.id }} .shipbar__text {
                    color: {{ block.settings.text_color }};
                    font-family: 'Neue Montreal', sans-serif;
                    font-weight: 400;
                    font-size: {{ block.settings.fs_list }}px;
                    line-height: 150%;
                    letter-spacing: 0.04em;
                  }

                  /* Responsive: Mobile */
                  @media (max-width: 749px) {
                    #shipbar-{{ block.id }} .shipbar__listwrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }
                    #shipbar-{{ block.id }} .shipbar__list { gap: 16px; flex-wrap: wrap; padding: 12px; }
                    #shipbar-{{ block.id }} .shipbar__left {
                      padding: 12px;
                      min-width: 112px;
                      flex-direction: row;
                      justify-content: flex-start;
                      align-items: center;
                      gap: 8px;
                      border-right: none;
                      border-bottom: 1px solid {{ block.settings.divider_color }};
                    }
                    #shipbar-{{ block.id }} .shipbar__inner { flex-direction: column; }
                    #shipbar-{{ block.id }} .shipbar__item { width: calc(50% - 8px); }
                    #shipbar-{{ block.id }} .shipbar__value { margin-top: 0; font-size: 16px; }
                    #shipbar-{{ block.id }} .shipbar__label { font-size: 14px; }
                  }

                  /* Responsive: Laptop/Tablet Overrides */
                  @media (min-width: 750px) {
                    #shipbar-{{ block.id }} .shipbar__left {
                      padding-left: 20px !important;
                      padding-right: 20px !important;
                      text-align: left !important;
                    }
                  }

                  /* Responsive: Large Screens (2200px+) */
                  @media (min-width: 2200px) {
                    #shipbar-{{ block.id }} .shipbar__label { font-size: calc({{ block.settings.fs_label }}px * 1.3); }
                    #shipbar-{{ block.id }} .shipbar__value { font-size: calc({{ block.settings.fs_date }}px * 1.3); }
                    #shipbar-{{ block.id }} .shipbar__icon { width: calc({{ block.settings.icon_size }}px * 1.3); height: calc({{ block.settings.icon_size }}px * 1.3); }
                    #shipbar-{{ block.id }} .shipbar__text { font-size: calc({{ block.settings.fs_list }}px * 1.3); }
                  }
                </style>
              {%- when 'product_icons_block' -%}
                <div class="pf-wrap product-block-icons" {{ block.shopify_attributes }}>
                  {% comment %} --- Buttons removed, just the track remains --- {% endcomment %}
                  <div class="pf-track" role="list">
                    {%- for i in (1..8) -%}
                      {%- capture icon_img_key -%}icon_{{ i }}{%- endcapture -%}
                      {%- capture text_l1_key -%}text_{{ i }}_l1{%- endcapture -%}
                      {%- capture text_l2_key -%}text_{{ i }}_l2{%- endcapture -%}

                      {%- assign icon_image = block.settings[icon_img_key] -%}
                      {%- assign text_line1 = block.settings[text_l1_key] -%}
                      {%- assign text_line2 = block.settings[text_l2_key] -%}

                      {%- if text_line1 != blank or icon_image != blank -%}
                        <div class="pf-item" role="listitem">
                          <div class="pf-icon">
                            {%- if icon_image != blank -%}
                              <img
                                src="{{ icon_image | img_url: '80x80' }}"
                                alt="{{ text_line1 }} {{ text_line2 }}"
                                width="40"
                                height="40"
                                loading="lazy"
                              >
                            {%- else -%}
                              <div class="pf-icon__ph"></div>
                            {%- endif -%}
                          </div>
                          <div class="pf-text">
                            <span class="pf-line1">{{ text_line1 }}</span>
                            <span class="pf-line2">{{ text_line2 }}</span>
                          </div>
                        </div>
                      {%- endif -%}
                    {%- endfor -%}
                  </div>

                  <div class="pf-progress" aria-hidden="true">
                    <span class="pf-progress__bar" style="width: 0%;"></span>
                  </div>
                </div>

                <style>
                  .product-block-icons.pf-wrap {
                    margin: {{ block.settings.margin_top }}px 0 {{ block.settings.margin_bottom }}px 0;
                    color: {{ block.settings.text_color }};
                    max-width: 100%; position: relative;
                  }

                  .product-block-icons .pf-track {
                    display: flex; gap: 12px; align-items: flex-start;
                    overflow-x: auto; scrollbar-width: none;
                    scroll-behavior: smooth;
                    padding: 10px 0;
                    flex: 1;
                    width: 100%;
                  }
                  .product-block-icons .pf-track::-webkit-scrollbar { display: none; }

                  .product-block-icons .pf-item { width: 87px; flex: 0 0 87px; text-align: center; }
                  .product-block-icons .pf-icon { width: 40px; height: 40px; margin: 0 auto 8px; display: flex; align-items: center; justify-content: center; }
                  .product-block-icons .pf-icon img { width: 40px; height: 40px; object-fit: contain; }
                  .product-block-icons .pf-icon__ph { width: 40px; height: 40px; background: #eee; border-radius: 50%; }

                  .product-block-icons .pf-text { font-size: 12px; line-height: 1.4; color: inherit; }
                  .product-block-icons .pf-line1, .product-block-icons .pf-line2 { display: block; }

                  /* Progress Bar */
                  .product-block-icons .pf-progress {
                    display: none;
                    height: 4px; border-radius: 99px; margin-top: 10px;
                    background: rgba(0,0,0,0.05); overflow: hidden; width: 100px; margin-left: auto; margin-right: auto;
                  }
                  .product-block-icons .pf-progress__bar {
                    display: block; height: 100%; width: 0; background: {{ block.settings.bar_color }}; transition: width 0.1s;
                  }

                  @media (max-width: 768px){
                    .product-block-icons .pf-track { gap: 8px; }
                    .product-block-icons .pf-item { width: 80px; flex: 0 0 80px; }
                    .product-block-icons .pf-progress { display: block; }
                  }
                </style>

                <script>
                  (function () {
                    // Find the wrapper relative to this script
                    var wrap = document.currentScript.previousElementSibling.previousElementSibling;
                    if (!wrap) return;

                    var track = wrap.querySelector('.pf-track');
                    var bar = wrap.querySelector('.pf-progress__bar');

                    if (track && bar) {
                      // Progress Bar Logic (Kept mostly for mobile scroll indication)
                      track.addEventListener('scroll', function () {
                        var max = track.scrollWidth - track.clientWidth;
                        if (max <= 0) return;
                        var percent = (track.scrollLeft / max) * 100;
                        bar.style.width = percent + '%';
                      });
                    }
                  })();
                </script>
              {%- when 'price' -%}
                <div id="block-{{ block.id }}" role="status" {{ block.shopify_attributes }}>
                  <style>
                    /* Base/Desktop Styles */
                    #block-{{ block.id }} {
                      background-color: {{ block.settings.bg_color }};
                      border-radius: 8px;
                    }

                    #block-{{ block.id }} .price-item--regular,
                    #block-{{ block.id }} .price-item--sale {
                      font-size: {{ block.settings.main_price_size }}px !important;
                      color: {{ block.settings.price_color }} !important;
                    }

                    #block-{{ block.id }} .price-item--sale {
                      color: {{ block.settings.sale_price_color }} !important;
                    }

                    #block-{{ block.id }} .price__sale .price-item--regular {
                      font-size: {{ block.settings.compare_price_size }}px !important;
                      color: {{ block.settings.compare_price_color }} !important;
                      text-decoration: line-through;
                    }

                    /* Mobile Media Query (under 749px) */
                    @media screen and (max-width: 749px) {
                      #block-{{ block.id }} .price-item--regular,
                      #block-{{ block.id }} .price-item--sale {
                        /* 20% reduction: multiplying by 0.8 */
                        font-size: {{ block.settings.main_price_size | times: 0.8 | round }}px !important;
                      }

                      #block-{{ block.id }} .price__sale .price-item--regular {
                        /* 20% reduction for compare price */
                        font-size: {{ block.settings.compare_price_size | times: 0.8 | round }}px !important;
                      }
                    }
                  </style>
                  {%-
                    render 'price',
                    product: product,,
                    block: block,
                    use_variant: true,
                    show_badges: true,
                    price_class: 'price--large'
                  -%}
                </div>
                {%- if product.quantity_price_breaks_configured? -%}
                  <div class="volume-pricing-note" id="Volume-Note-{{ section.id }}">
                    <span>{{ 'products.product.volume_pricing.note' | t }}</span>
                  </div>
                {%- endif -%}
                <div {{ block.shopify_attributes }}>
                  {%- assign product_form_installment_id = 'product-form-installment-' | append: section.id -%}
                  {%- form 'product', product, id: product_form_installment_id, class: 'installment caption-large' -%}
                    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                    {{ form | payment_terms }}
                  {%- endform -%}
                </div>

              {%- when 'inventory' -%}
                <p
                  class="product__inventory"
                  {{ block.shopify_attributes }}
                  id="Inventory-{{ section.id }}"
                  role="status"
                >
                  {%- if product.selected_or_first_available_variant.inventory_management == 'shopify' -%}
                    {%- if product.selected_or_first_available_variant.inventory_quantity > 0 -%}
                      {%- if product.selected_or_first_available_variant.inventory_quantity
                          <= block.settings.inventory_threshold
                      -%}
                        <span class="svg-wrapper" style="color: rgb(238, 148, 65)">
                          {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                        </span>
                        {%- if block.settings.show_inventory_quantity -%}
                          {{-
                            'products.product.inventory_low_stock_show_count'
                            | t: quantity: product.selected_or_first_available_variant.inventory_quantity
                          -}}
                        {%- else -%}
                          {{- 'products.product.inventory_low_stock' | t -}}
                        {%- endif -%}
                      {%- else -%}
                        <span class="svg-wrapper" style="color: rgb(62, 214, 96)">
                          {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                        </span>
                        {%- if block.settings.show_inventory_quantity -%}
                          {{-
                            'products.product.inventory_in_stock_show_count'
                            | t: quantity: product.selected_or_first_available_variant.inventory_quantity
                          -}}
                        {%- else -%}
                          {{- 'products.product.inventory_in_stock' | t -}}
                        {%- endif -%}
                      {%- endif -%}
                    {%- else -%}
                      {%- if product.selected_or_first_available_variant.inventory_policy == 'continue' -%}
                        <span class="svg-wrapper" style="color: rgb(62, 214, 96)">
                          {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                        </span>
                        {{- 'products.product.inventory_out_of_stock_continue_selling' | t -}}
                      {%- else -%}
                        <span class="svg-wrapper" style="color: rgb(200, 200, 200)">
                          {{- 'icon-inventory-status.svg' | inline_asset_content -}}
                        </span>
                        {{- 'products.product.inventory_out_of_stock' | t -}}
                      {%- endif -%}
                    {%- endif -%}
                  {%- endif -%}
                </p>

              {%- when 'description' -%}
                {%- if product.description != blank -%}
                  <div
                    id="block-{{ block.id }}"
                    class="product__description rte quick-add-hidden"
                    {{ block.shopify_attributes }}
                  >
                    <style>
                      #block-{{ block.id }} {
                        color: {{ block.settings.color_text }} !important;
                        font-size: {{ block.settings.font_size }}px !important;
                      }
                      #block-{{ block.id }} p, #block-{{ block.id }} li { color: inherit; font-size: inherit; }
                    </style>
                    {{ product.description }}
                  </div>
                {%- endif -%}

              {%- when 'sku' -%}
                <p
                  class="product__sku"
                  id="Sku-{{ section.id }}"
                  role="status"
                  {{ block.shopify_attributes }}
                  style="font-size: {{ block.settings.font_size }}px; color: {{ block.settings.color_text }};"
                >
                  <span class="visually-hidden">{{ 'products.product.sku' | t }}:</span>
                  {{- product.selected_or_first_available_variant.sku -}}
                </p>

              {%- when 'custom_liquid' -%}
                {{ block.settings.custom_liquid }}

              {%- when 'collapsible_tab' -%}
                <div class="product__accordion accordion quick-add-hidden" {{ block.shopify_attributes }}>
                  <details id="Details-{{ block.id }}-{{ section.id }}">
                    <summary>
                      <div class="summary__title">
                        {%- if block.settings.custom_icon != blank -%}
                          <img
                            src="{{ block.settings.custom_icon | image_url: width: 24 }}"
                            width="24"
                            height="24"
                            loading="lazy"
                            style="margin-right: 1rem; object-fit: contain;"
                          >
                        {%- else -%}
                          {% render 'icon-accordion', icon: block.settings.icon %}
                        {%- endif -%}
                        <h2 class="h4 accordion__title inline-richtext">
                          {{ block.settings.heading | default: block.settings.page.title | escape }}
                        </h2>
                      </div>
                      {{- 'icon-caret.svg' | inline_asset_content -}}
                    </summary>
                    <div class="accordion__content rte" id="ProductAccordion-{{ block.id }}-{{ section.id }}">
                      {% comment %} --- Original Content --- {% endcomment %}
                      {{ block.settings.content }}
                      {{ block.settings.page.content }}

                      {% comment %} --- NEW: Review Highlights Section --- {% endcomment %}
                      {%- if block.settings.enable_reviews -%}
                        <style>
                          .rh-wrap { color:{{ block.settings.review_text_color }};  }
                          .rh-list { list-style:none; margin:0 0 12px; padding:0; }
                          .rh-item { padding:0px 0 20px 0px !important; border-top:1px solid rgba(0,0,0,0.1); }
                          .rh-item:first-child { border-top:0; }

                          .rh-stars { display:flex; gap:0px; margin-bottom:8px; color: #B57C46; }
                          .rh-star svg { width:18px; height:18px; display:block; fill: currentColor; }

                          .rh-head { display:flex; align-items:center; gap:16px; margin-bottom:8px; }
                          .rh-avatar { width:48px; height:48px; border-radius:50%; object-fit:cover; background:#f0f0f0; display:block; }

                          .rh-meta { display:flex; flex-direction:column; gap:4px; }
                          .rh-name {
                             font-family: inherit; font-weight: 700; font-size: 16px;
                             color: {{ block.settings.review_name_color }};
                             display: flex; align-items: center; gap: 8px; margin: 0;
                          }
                          .rh-role {
                             color: {{ block.settings.review_role_color }};
                             font-size: 12px; opacity: 0.9; line-height: 1.2;
                          }

                          .rh-text {
                             margin:0; font-size: 14px; line-height: 150%;
                             color: {{ block.settings.review_text_color }};
                          }

                          .rh-cta {
                             display:block; text-align:center; padding:12px 18px;
                             border:1px solid {{ block.settings.review_text_color }};
                             color: {{ block.settings.review_text_color }} !important;
                             text-decoration:none; border-radius:999px; font-weight:600;
                             background:transparent; margin-top: 15px; transition: 0.3s;
                          }
                          .rh-cta:hover { opacity: 0.7; }
                        </style>

                        <div class="rh-wrap">
                          <ul class="rh-list">
                            {%- for i in (1..10) -%}
                              {%- capture r_img -%}rev_img_{{ i }}{%- endcapture -%}
                              {%- capture r_name -%}rev_name_{{ i }}{%- endcapture -%}
                              {%- capture r_role -%}rev_role_{{ i }}{%- endcapture -%}
                              {%- capture r_text -%}rev_text_{{ i }}{%- endcapture -%}

                              {%- if block.settings[r_text] != blank -%}
                                <li class="rh-item">
                                  <div class="rh-stars" aria-label="5 out of 5 stars">
                                    {% for s in (1..5) -%}
                                      <span class="rh-star">
                                        <svg viewBox="0 0 14 14" fill="currentColor">
                                          <path d="M9.566 8.5L12.14 6L8.59 5.48L7 2.27L5.41 5.48L1.86 6L4.43 8.5L3.82 12.04L7 10.37L10.17 12.04L9.566 8.5Z"/>
                                        </svg>
                                      </span>
                                    {%- endfor %}
                                  </div>
                                  <div class="rh-head">
                                    {% if block.settings[r_img] != blank %}
                                      <img
                                        class="rh-avatar"
                                        src="{{ block.settings[r_img] | image_url: width: 100 }}"
                                        alt="{{ block.settings[r_name] }}"
                                        loading="lazy"
                                      >
                                    {% else %}
                                      <div
                                        class="rh-avatar"
                                        style="display:flex;align-items:center;justify-content:center;background:#ddd;color:#555;font-size:10px;"
                                      >
                                        User
                                      </div>
                                    {% endif %}
                                    <div class="rh-meta">
                                      <div class="rh-name">
                                        {{ block.settings[r_name] }}
                                        <svg
                                          xmlns="http://www.w3.org/2000/svg"
                                          width="16"
                                          height="16"
                                          viewBox="0 0 24 24"
                                          fill="none"
                                        >
                                          <path d="M9 12.893L10.8 14.5L15 9.5" stroke="currentColor" stroke-width="2" stroke-linecap="square"/><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                        </svg>
                                      </div>
                                      <div class="rh-role">{{ block.settings[r_role] }}</div>
                                    </div>
                                  </div>
                                  <p class="rh-text">{{ block.settings[r_text] }}</p>
                                </li>
                              {%- endif -%}
                            {%- endfor -%}
                          </ul>

                          {% if block.settings.review_link_url != blank %}
                            <a class="rh-cta" href="{{ block.settings.review_link_url }}">
                              {{- block.settings.review_link_text -}}
                            </a>
                          {% endif %}
                        </div>
                      {%- endif -%}

                      {% if block.settings.button_link != blank and block.settings.button_label != blank %}
                        <a
                          href="{{ block.settings.button_link }}"
                          class="button button--primary"
                          style="display: block; margin-top: 15px; width: 100%; text-align: center; text-decoration:none; padding: 10px; border-radius: 8px; background: transparent; display: flex;align-items: center; color: #FFFFFF;"
                        >
                          {{ block.settings.button_label }}
                        </a>
                      {% endif %}
                    </div>
                  </details>
                </div>

              {%- when 'quantity_selector' -%}
                <div
                  id="Quantity-Form-{{ section.id }}"
                  class="product-form__input product-form__quantity"
                  {{ block.shopify_attributes }}
                >
                  {%- assign cart_qty = cart
                    | item_count_for_variant: product.selected_or_first_available_variant.id
                  -%}
                  <label class="quantity__label form__label" for="Quantity-{{ section.id }}">
                    {{ 'products.product.quantity.label' | t }}
                  </label>
                  <quantity-input class="quantity">
                    <button class="quantity__button" name="minus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.decrease' | t: product: product.title | escape -}}
                      </span>
                      <span class="svg-wrapper">{{- 'icon-minus.svg' | inline_asset_content -}}</span>
                    </button>
                    <input
                      class="quantity__input"
                      type="number"
                      name="quantity"
                      id="Quantity-{{ section.id }}"
                      min="1"
                      value="1"
                      form="{{ product_form_id }}"
                    >
                    <button class="quantity__button" name="plus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.increase' | t: product: product.title | escape -}}
                      </span>
                      <span class="svg-wrapper">{{- 'icon-plus.svg' | inline_asset_content -}}</span>
                    </button>
                  </quantity-input>
                </div>

              {%- when 'variant_picker' -%}
                {% unless product.has_only_default_variant %}
                  {% render 'product-variant-picker',
                    product: product,
                    block: block,
                    product_form_id: product_form_id
                  %}
                {% endunless %}

              {%- when 'buy_buttons' -%}
                <div id="block-{{ block.id }}" {{ block.shopify_attributes }}>
                  <style>
                    #block-{{ block.id }} .product-form__submit {
                        background: {{ block.settings.atc_bg }} !important;
                        color: {{ block.settings.atc_text }} !important;
                        border: 1px solid {{ block.settings.atc_border }} !important;
                        font-size: {{ block.settings.atc_font_size }}px !important;
                        transition: 0.3s ease;
                    }
                    #block-{{ block.id }} .product-form__submit:hover {
                        background: {{ block.settings.atc_bg_hover }} !important;
                        color: {{ block.settings.atc_text_hover }} !important;
                        opacity: 0.9;
                    }
                  </style>
                  {%- render 'buy-buttons',
                    block: block,
                    product: product,
                    product_form_id: product_form_id,
                    section_id: section.id,
                    show_pickup_availability: true
                  -%}
                </div>

              {%- when 'rating' -%}
                {%- if product.metafields.reviews.rating.value != blank -%}
                  <div class="rating-wrapper">
                    <p class="rating-text caption">
                      <span aria-hidden="true">
                        {{- product.metafields.reviews.rating.value }} /
                        {{ product.metafields.reviews.rating.value.scale_max -}}
                      </span>
                    </p>
                    <p class="rating-count caption">
                      <span aria-hidden="true">({{ product.metafields.reviews.rating_count }})</span>
                    </p>
                  </div>
                {%- endif -%}

              {%- when 'bundle_widget' -%}
                <div id="pb-bundles-{{ section.id }}" class="pb-wrap" {{ block.shopify_attributes }}>
                  <style>
                    #pb-bundles-{{ section.id }} .pb-wrap { margin: 24px 0; border-radius: 12px; overflow: hidden; }
                    #pb-bundles-{{ section.id }} .pb-option-group { margin-bottom: 20px; }
                    #pb-bundles-{{ section.id }} .pb-option-title { margin-bottom: 10px; font-weight: bold; font-size: 14px; display:flex; justify-content:space-between; align-items:center; color:{{ block.settings.label_color }}; }

                    /* --- Option Row 1 (e.g. Size/Set) - Flex Style --- */
                    #pb-bundles-{{ section.id }} .pb-opt-row-1 {
                      display: flex; gap:10px; flex-wrap:wrap;
                    }
                    #pb-bundles-{{ section.id }} .pb-opt-btn-1 {
                      flex: 1; text-align: center; padding: 12px 10px; cursor: pointer; transition: 0.3s;
                      background: {{ block.settings.tab_bg_inactive }};
                      color: {{ block.settings.tab_text_inactive }};
                      border: 1px solid {{ block.settings.tab_border }};
                      border-radius: 6px; font-size: 13px;
                    }
                    #pb-bundles-{{ section.id }} .pb-opt-btn-1.active {
                      background: {{ block.settings.tab_bg_active }};
                      color: {{ block.settings.tab_text_active }};
                      font-weight: bold; border-color: {{ block.settings.tab_bg_active }};
                    }

                    /* --- Option Row 2 (e.g. Color) - Grid Style (Select Set) --- */
                    #pb-bundles-{{ section.id }} .pb-opt-row-2 {
                        display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
                    }
                    #pb-bundles-{{ section.id }} .pb-opt-btn-2 {
                      padding: 12px 10px; border-radius: 6px; cursor: pointer; font-size: 13px; text-align:center;
                      background: {{ block.settings.color_btn_bg }};
                      color: {{ block.settings.color_btn_text }};
                      border: 1px solid {{ block.settings.color_btn_border }};
                      transition: 0.3s;
                    }
                    #pb-bundles-{{ section.id }} .pb-opt-btn-2.active {
                      background: {{ block.settings.color_btn_active_bg }};
                      color: {{ block.settings.color_btn_active_text }};
                      font-weight: bold; border-color: {{ block.settings.color_btn_active_bg }};
                    }

                    /* Bundle Cards */
                    #pb-bundles-{{ section.id }} .pb-card {
                      background: {{ block.settings.card_bg }};
                      border: 1px solid {{ block.settings.card_border }};
                      border-radius: 12px; padding: 15px; margin-top: 15px;
                      cursor: pointer; transition: 0.3s;
                      color: {{ block.settings.card_text }}; position: relative;
                    }
                    /* Modified Active State: White Background, Black Text */
                    #pb-bundles-{{ section.id }} .pb-card.active {
                      border: 2px solid {{ block.settings.active_card_border }};
                      background: #FFFFFF !important;
                      color: #000000 !important;
                    }
                    /* Force child elements to black on active */
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__title,
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__info,
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__desc,
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__price,
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__compare-note {
                        color: #000000 !important;
                    }

                    #pb-bundles-{{ section.id }} .pb-card__title { font-weight: bold; font-size: 15px; margin-bottom: 4px; }

                    /* NEW SHORT INFO STYLE */
                    #pb-bundles-{{ section.id }} .pb-card__info {
                      font-size: {{ block.settings.info_font_size }}px;
                      color: {{ block.settings.info_color }};
                      margin-bottom: 6px;
                      line-height: 1.3;
                    }

                    #pb-bundles-{{ section.id }} .pb-card__desc {
                      font-size: {{ block.settings.desc_font_size }}px;
                      color: {{ block.settings.desc_color }};
                      opacity: 0.9;
                    }
                    #pb-bundles-{{ section.id }} .pb-card__price {
                      margin-top: 8px; font-weight: bold;
                      color: {{ block.settings.card_price_color }};
                      font-size: {{ block.settings.price_font_size }}px;
                    }
                    #pb-bundles-{{ section.id }} .pb-card__compare-note {
                      color: {{ block.settings.compare_note_color }};
                      font-size: {{ block.settings.compare_note_size }}px;
                    }
                    #pb-bundles-{{ section.id }} .pb-card__badge {
                      position: absolute; top: 0; right: 0;
                      background: {{ block.settings.badge_bg }};
                      color: {{ block.settings.badge_text }};
                      font-size: {{ block.settings.badge_font_size }}px;
                      padding: 2px 8px;
                      border-bottom-left-radius: 8px;
                      border-top-right-radius: 8px;
                      font-weight: bold;
                    }

                    /* Gallery Images below Price - Default Hidden, Visible on Active */
                    #pb-bundles-{{ section.id }} .pb-card__gallery {
                      display: none; /* Hidden by default */
                      gap: 8px; margin-top: 12px;
                      overflow-x: auto; scrollbar-width: none;
                    }
                    #pb-bundles-{{ section.id }} .pb-card.active .pb-card__gallery {
                      display: flex; /* Show only when active */
                    }
                    #pb-bundles-{{ section.id }} .pb-card__gallery::-webkit-scrollbar { display: none; }
                    #pb-bundles-{{ section.id }} .pb-card__gallery img {
                      width: 60px; height: 60px; object-fit: contain;
                      border-radius: 4px; border: 1px solid rgba(0,0,0,0.05);
                      background: #fff; flex-shrink: 0;
                    }

                    /* Button */
                    #pb-bundles-{{ section.id }} .pb-atc-btn {
                      width: 100%; padding: 16px;
                      background: {{ block.settings.btn_bg }};
                      color: {{ block.settings.btn_text }};
                      border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer;
                      transition: opacity 0.2s; margin-top: 15px; text-transform: uppercase; letter-spacing: 1px;
                    }
                    #pb-bundles-{{ section.id }} .pb-atc-btn:hover {
                      opacity: 0.9;
                      background: {{ block.settings.btn_hover_bg }};
                      color: {{ block.settings.btn_hover_text }};
                    }
                    #pb-bundles-{{ section.id }} .secure-note { color: {{ block.settings.guarantee_color }}; }
                  </style>

                  {% comment %} --- DYNAMIC VARIANT OPTIONS RENDERER --- {% endcomment %}
                  {%- unless product.has_only_default_variant -%}
                    <div class="pb-options-container" id="pb-options-{{ section.id }}">
                      {%- for option in product.options_with_values -%}
                        <div class="pb-option-group" data-option-index="{{ forloop.index0 }}">
                          <div class="pb-option-title">
                            <span>{{ option.name }}</span>
                            {% if forloop.index == 1 -%}
                              <button
                                type="button"
                                onclick="toggleSizeGuide(true)"
                                style="background:none;border:none;text-decoration:underline;cursor:pointer;color:inherit;font-size:12px;"
                              >
                                {{ block.settings.size_guide_text }}
                              </button>
                            {%- endif %}
                          </div>

                          {% comment %} Style 1: Colors (Usually 1st) | Style 2: Sets/Sizes (Usually 2nd) {% endcomment %}
                          <div class="{% if forloop.index == 1 %}pb-opt-row-1{% else %}pb-opt-row-2{% endif %}">
                            {%- for value in option.values -%}
                              <div
                                class="{% if forloop.parentloop.index == 1 %}pb-opt-btn-1{% else %}pb-opt-btn-2{% endif %} {% if option.selected_value == value %}active{% endif %}"
                                data-value="{{ value | escape }}"
                                onclick="handleBundleOptionChange(this)"
                              >
                                {{ value }}
                              </div>
                            {%- endfor -%}
                          </div>
                        </div>
                      {%- endfor -%}
                    </div>
                  {%- endunless -%}

                  {% if block.settings.enable_bundles %}
                    <div
                      class="pb-title"
                      style="margin: 20px 0 10px; font-weight:500; color: {{ block.settings.label_color }}"
                    >
                      {{ block.settings.bundles_heading }}
                    </div>
                    {%- for i in (1..3) -%}
                      {%- capture prod_setting -%}bundle_product_{{ i }}{%- endcapture -%}
                      {%- capture title_setting -%}bundle_title_{{ i }}{%- endcapture -%}
                      {%- capture info_setting -%}bundle_info_{{ i }}{%- endcapture -%}
                      {%- capture desc_setting -%}bundle_desc_{{ i }}{%- endcapture -%}
                      {%- capture badge_setting -%}bundle_badge_{{ i }}{%- endcapture -%}

                      {%- comment -%} Capture Custom Image Logic Variables {%- endcomment -%}
                      {%- capture enable_custom_key -%}enable_custom_img_{{ i }}{%- endcapture -%}
                      {%- assign show_custom_images = block.settings[enable_custom_key] -%}

                      {%- assign b_prod = all_products[block.settings[prod_setting]] -%}
                      {%- if b_prod != empty -%}
                        <div
                          class="pb-card"
                          onclick="selectBundleProduct(this, '{{ b_prod.selected_or_first_available_variant.id }}', '{{ b_prod.price | money }}')"
                          data-id="{{ b_prod.selected_or_first_available_variant.id }}"
                          data-image="{{ b_prod.featured_image | image_url: width: 1000 }}"
                        >
                          {% if block.settings[badge_setting] != blank %}
                            <span class="pb-card__badge">{{ block.settings[badge_setting] }}</span>
                          {% endif %}

                          <div class="pb-card__title">{{ block.settings[title_setting] | default: b_prod.title }}</div>

                          {% comment %} --- NEW: Short Info Under Title --- {% endcomment %}
                          {% if block.settings[info_setting] != blank %}
                            <div class="pb-card__info">{{ block.settings[info_setting] }}</div>
                          {% endif %}

                          <div class="pb-card__desc">{{ block.settings[desc_setting] }}</div>

                          <div class="pb-card__price">
                            {{ b_prod.price | money }}
                            {% if b_prod.compare_at_price > b_prod.price %}
                              <span class="pb-card__compare-note">({{ b_prod.compare_at_price | money }} Value)</span>
                            {% endif %}
                          </div>

                          {% comment %} --- Display Images Below Price (Custom vs Product) --- {% endcomment %}
                          <div class="pb-card__gallery">
                            {%- if show_custom_images -%}
                              {%- comment -%} Loop through 6 custom images {%- endcomment -%}
                              {%- for j in (1..6) -%}
                                {%- capture img_key -%}b{{ i }}_img_{{ j }}{%- endcapture -%}
                                {%- assign custom_img = block.settings[img_key] -%}
                                {%- if custom_img != blank -%}
                                  <img src="{{ custom_img | image_url: width: 120 }}" loading="lazy" alt="Bundle Image">
                                {%- endif -%}
                              {%- endfor -%}
                            {%- else -%}
                              {%- comment -%} Standard Product Images {%- endcomment -%}
                              {%- if b_prod.images.size > 0 -%}
                                {%- for image in b_prod.images -%}
                                  <img
                                    src="{{ image | image_url: width: 120 }}"
                                    loading="lazy"
                                    alt="{{ image.alt | escape }}"
                                  >
                                {%- endfor -%}
                              {%- endif -%}
                            {%- endif -%}
                          </div>
                        </div>
                      {%- endif -%}
                    {%- endfor -%}
                  {% endif %}

                  <div class="pb-atc-wrap">
                    {% comment %} --- RESTORED FORM TAG --- {% endcomment %}
                    <form
                      method="post"
                      action="/cart/add"
                      class="product-form"
                      id="bundle-form-{{ section.id }}"
                      novalidate="novalidate"
                    >
                      <input
                        type="hidden"
                        name="id"
                        id="bundle-variant-input"
                        value="{{ product.selected_or_first_available_variant.id }}"
                      >

                      {% comment %} --- Button type changed back to submit, onclick retained for interception --- {% endcomment %}
                      <button type="submit" class="pb-atc-btn" id="bundle-atc-btn" onclick="handleAddToCart(event)">
                        {{ 'products.product.add_to_cart' | t }} -
                        <span id="bundle-price-display">
                          {{- product.selected_or_first_available_variant.price | money -}}
                        </span>
                      </button>
                    </form>
                  </div>
                  <div class="secure-checkout" style="margin-top:15px; text-align:center;">
                    <div class="secure-note" style="font-size: 12px; opacity: 1; ">
                      <span style="margin-right:5px"></span>
                      <span class="guarantee-text">{{ block.settings.guarantee_text }}</span>
                    </div>
                  </div>
                </div>
                <div class="pay-badges" aria-label="Accepted payment methods">
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_7.png?v=1755250343"
                  ></span>
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_6.png?v=1755250307"
                  ></span>
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_5.png?v=1755250282"
                  ></span>
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_4.png?v=1755250247"
                  ></span>
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_3.png?v=1755249706"
                  ></span>
                  <span class="pay-badge"
                    ><img src="//taimatitanium.com/cdn/shop/files/Container_2.png?v=1755249660"
                  ></span>
                </div>
                <script>
    (function() {
      // Raw variant data for Main Product
      var bundleVariants = {{ product.variants | json }};
        
      // State tracker for current selections (Main Product)
      var state = [
        "{{ product.options_with_values[0].selected_value | escape }}",
        "{{ product.options_with_values[1].selected_value | escape }}",
        "{{ product.options_with_values[2].selected_value | escape }}"
      ];

      // --- FUNCTION TO SELECT BUNDLE CARD ---
      window.selectBundleProduct = function(card, variantId, priceText) {
         // 1. Check if already active (toggle off)
         if (card.classList.contains('active')) {
             card.classList.remove('active');
             
             // Reset price display to Main Product Price (optional logic)
             var mainPrice = "{{ product.selected_or_first_available_variant.price | money }}";
             var btnPrice = document.getElementById('bundle-price-display');
             if(btnPrice) btnPrice.innerText = mainPrice;

             return; 
         }

         // 2. Remove active class from all other bundle cards
         document.querySelectorAll('.pb-card').forEach(function(c) {
            c.classList.remove('active');
         });
         
         // 3. Add active class to clicked card
         card.classList.add('active');

         // 4. Update Price on Button (Visual only)
         var btnPrice = document.getElementById('bundle-price-display');
         if(btnPrice) btnPrice.innerText = priceText;
      };

      // --- FUNCTION TO HANDLE MAIN OPTIONS CHANGE ---
      window.handleBundleOptionChange = function(element) {
        var group = element.closest('.pb-option-group');
        var optionIndex = parseInt(group.getAttribute('data-option-index'));

        var buttons = group.querySelectorAll('div[data-value]');
        buttons.forEach(function(btn) {
          btn.classList.remove('active');
        });
        element.classList.add('active');

        var value = element.getAttribute('data-value');
        state[optionIndex] = value;

        var matched = bundleVariants.find(function(v) {
          var match = true;
          if(state[0] && v.option1 !== state[0]) match = false;
          if(state[1] && v.option2 !== state[1]) match = false;
          if(state[2] && v.option3 !== state[2]) match = false;
          return match;
        });

        if(matched) {
          // Update Hidden Input ID (THIS IS THE MAIN PRODUCT ID)
          var input = document.getElementById('bundle-variant-input');
          if(input) input.value = matched.id;

          // Format Prices
          var formattedPrice = '$' + (matched.price / 100).toFixed(0);

          // Update Price on Add to Cart Button (Only if no bundle selected)
          var activeCard = document.querySelector('.pb-card.active');
          if (!activeCard) {
              var btnPrice = document.getElementById('bundle-price-display');
              if(btnPrice) btnPrice.innerText = formattedPrice;
          }

          // Update Media
          if(matched.featured_media) {
              const sectionId = "{{ section.id }}";
              const gallery = document.querySelector(`product-info[id="MainProduct-${sectionId}"] media-gallery`);
              if (gallery && gallery.setActiveMedia) { 
               gallery.setActiveMedia(`${sectionId}-${matched.featured_media.id}`, true); 
              }
          }
        }
      };

      // --- ROBUST ADD TO CART FUNCTION (FIXED) ---
      window.handleAddToCart = function(e) {
          const btn = document.getElementById('bundle-atc-btn');
          
          // 1. Check if we should BYPASS our custom logic (flag set by us previously)
          if (btn.getAttribute('data-bypass') === 'true') {
              btn.removeAttribute('data-bypass');
              return; // Let the form submit naturally -> Theme handles drawer
          }

          // 2. CHECK DOM: Is any bundle card visually selected?
          const activeCard = document.querySelector('.pb-card.active');
          
          // If NO bundle selected, do nothing (Standard behavior)
          if (!activeCard) {
              return; 
          }

          // 3. If Bundle IS selected -> INTERCEPT
          e.preventDefault();
          const originalText = btn.innerHTML; // Save correct HTML
          btn.innerText = 'Adding...';
          
          // Get ID from the DOM element directly
          const bundleId = activeCard.getAttribute('data-id');

          // 4. Add BUNDLE ITEM via AJAX
          fetch(window.Shopify.routes.root + 'cart/add.js', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ items: [{ id: bundleId, quantity: 1 }] })
          })
          .then(() => {
              // 5. Success -> Set BYPASS flag and re-click button
              // FIX: Use innerHTML instead of innerText to restore spans/tags
              btn.innerHTML = originalText; 
              btn.setAttribute('data-bypass', 'true');
              btn.click(); 
          })
          .catch((error) => {
              console.error('Error adding bundle:', error);
              // FIX: Use innerHTML here too
              btn.innerHTML = originalText;
          });
      };

    })();
                </script>

              {%- when 'shipping_bar' -%}
                <div
                  class="shipbar"
                  style="background: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }};"
                  {{ block.shopify_attributes }}
                >
                  <div class="chiild" style="padding: 0 15px; border-right: 1px solid rgba(255,255,255,0.1);">
                    <div class="shipbar__label">{{ block.settings.alert_text }}</div>
                    <div class="shipbar__value" id="dynamic-ship-date">Jan 2nd</div>
                  </div>
                  <div class="shipbar__list">
                    {% if block.settings.text_1 != blank %}
                      <div class="shipbar__item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span>{{ block.settings.text_1 }}</span>
                      </div>
                    {% endif %}
                    {% if block.settings.text_2 != blank %}
                      <div class="shipbar__item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        <span>{{ block.settings.text_2 }}</span>
                      </div>
                    {% endif %}
                  </div>
                </div>
                <script>
                  const date = new Date();
                  date.setDate(date.getDate() + 3);
                  const options = { month: 'short', day: 'numeric' };
                  document.getElementById('dynamic-ship-date').innerText = date.toLocaleDateString('en-US', options);
                </script>

              {%- when 'info_tabs' -%}
                <div class="pit" id="product-info-tabs-{{ block.id }}" {{ block.shopify_attributes }}>
                  <style>
                    /* Styles for Show More */
                    .pit-content-wrap {
                      position: relative;
                      max-height: 120px; /* Adjust height limit */
                      overflow: hidden;
                      transition: max-height 0.3s ease;
                    }
                    .pit-content-wrap.expanded {
                      max-height: none;
                    }
                    .pit-show-more-btn {
                      display: block;
                      margin-top: 15px;
                      background: transparent;
                      color: inherit;
                      cursor: pointer;
                      font-size: 14px;
                      padding: 10px 20px;
                      font-weight: 600;
                      width: 100%;
                      border: 1px solid currentColor; /* Outlined Border */
                      border-radius: 8px; /* Rounded corners */
                      text-align: center;
                      text-decoration: none;
                    }
                    .pit-show-more-btn:hover {
                      opacity: 0.8;
                    }
                    /* SHADOW REMOVED as requested */
                    .pit-content-wrap:not(.expanded)::after {
                        display: none;
                    }
                  </style>

                  <div class="pit-tabs" role="tablist">
                    <button
                      class="pit-tab is-active"
                      role="tab"
                      onclick="openPitTab(event, 'panel-1-{{ block.id }}', '{{ block.id }}')"
                    >
                      {{ block.settings.tab_1_label }}
                      <span class="pit-underline"></span>
                    </button>
                    <button
                      class="pit-tab"
                      role="tab"
                      onclick="openPitTab(event, 'panel-2-{{ block.id }}', '{{ block.id }}')"
                    >
                      {{ block.settings.tab_2_label }}
                      <span class="pit-underline"></span>
                    </button>
                    <button
                      class="pit-tab"
                      role="tab"
                      onclick="openPitTab(event, 'panel-3-{{ block.id }}', '{{ block.id }}')"
                    >
                      {{ block.settings.tab_3_label }}
                      <span class="pit-underline"></span>
                    </button>
                  </div>

                  <div class="pit-panels">
                    <div id="panel-1-{{ block.id }}" class="pit-panel is-active">
                      <div class="pit-content-wrap" id="wrap-1-{{ block.id }}">
                        <div class="pit-copy rte">{{ block.settings.tab_1_content }}</div>
                      </div>
                      <button class="pit-show-more-btn" onclick="toggleShowMore('wrap-1-{{ block.id }}', this)">
                        Show More
                      </button>

                      {% if block.settings.tab_1_image != blank %}
                        <div class="pit-image" style="margin-top: 15px;">
                          <img
                            src="{{ block.settings.tab_1_image | image_url: width: 800 }}"
                            loading="lazy"
                            style="width:100%; height:auto; border-radius:8px;"
                          >
                        </div>
                      {% endif %}
                    </div>

                    <div id="panel-2-{{ block.id }}" class="pit-panel">
                      <div class="pit-content-wrap" id="wrap-2-{{ block.id }}">
                        <div class="pit-copy rte">{{ block.settings.tab_2_content }}</div>
                      </div>
                      <button class="pit-show-more-btn" onclick="toggleShowMore('wrap-2-{{ block.id }}', this)">
                        Show More
                      </button>

                      {% if block.settings.tab_2_image != blank %}
                        <div class="pit-image" style="margin-top: 15px;">
                          <img
                            src="{{ block.settings.tab_2_image | image_url: width: 800 }}"
                            loading="lazy"
                            style="width:100%; height:auto; border-radius:8px;"
                          >
                        </div>
                      {% endif %}
                    </div>

                    <div id="panel-3-{{ block.id }}" class="pit-panel">
                      <div class="pit-content-wrap" id="wrap-3-{{ block.id }}">
                        <div class="pit-copy rte">{{ block.settings.tab_3_content }}</div>
                      </div>
                      <button class="pit-show-more-btn" onclick="toggleShowMore('wrap-3-{{ block.id }}', this)">
                        Show More
                      </button>

                      {% if block.settings.tab_3_image != blank %}
                        <div class="pit-image" style="margin-top: 15px;">
                          <img
                            src="{{ block.settings.tab_3_image | image_url: width: 800 }}"
                            loading="lazy"
                            style="width:100%; height:auto; border-radius:8px;"
                          >
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>

                <script>
                  function openPitTab(evt, panelId, blockId) {
                    var container = document.getElementById('product-info-tabs-' + blockId);
                    var panels = container.getElementsByClassName('pit-panel');
                    for (var i = 0; i < panels.length; i++) {
                      panels[i].classList.remove('is-active');
                    }
                    var tabs = container.getElementsByClassName('pit-tab');
                    for (var i = 0; i < tabs.length; i++) {
                      tabs[i].classList.remove('is-active');
                    }
                    document.getElementById(panelId).classList.add('is-active');
                    evt.currentTarget.classList.add('is-active');
                  }

                  function toggleShowMore(wrapId, btn) {
                    var wrap = document.getElementById(wrapId);
                    if (wrap.classList.contains('expanded')) {
                      wrap.classList.remove('expanded');
                      btn.innerText = 'Show More';
                    } else {
                      wrap.classList.add('expanded');
                      btn.innerText = 'Show Less';
                    }
                  }

                  // Auto-hide button if content is short
                  document.addEventListener('DOMContentLoaded', function () {
                    document.querySelectorAll('.pit-content-wrap').forEach(function (wrap) {
                      if (wrap.scrollHeight <= 120) {
                        var btn = wrap.nextElementSibling;
                        if (btn && btn.classList.contains('pit-show-more-btn')) {
                          btn.style.display = 'none';
                          wrap.style.maxHeight = 'none'; // remove fade
                          wrap.classList.add('expanded'); // remove fade pseudo
                        }
                      }
                    });
                  });
                </script>

              {%- when 'accordion_custom' -%}
                <div class="pfaq-item" {{ block.shopify_attributes }}>
                  <details>
                    <summary class="pfaq-head">
                      <span class="pfaq-left" style="display: flex; gap: 12px; align-items: center;">
                        {% if block.settings.icon != blank %}
                          <img src="{{ block.settings.icon | image_url: width: 24 }}" width="24" height="24">
                        {% endif %}
                        <span class="pfaq-title">{{ block.settings.heading }}</span>
                      </span>
                      <span class="pfaq-plus">+</span>
                    </summary>
                    <div class="pfaq-body rte">
                      {{ block.settings.content }}
                      {% if block.settings.button_link != blank and block.settings.button_label != blank %}
                        <a
                          href="{{ block.settings.button_link }}"
                          class="button button--primary"
                          style="display: block; margin-top: 15px; width: 100%; text-align: center; text-decoration:none; padding: 10px; border-radius: 8px; background: transparent; border: 1px solid #FFFFFF; color: #FFFFFF;"
                        >
                          {{ block.settings.button_label }}
                        </a>
                      {% endif %}
                    </div>
                  </details>
                </div>

              {%- when 'impact_note' -%}
                <div
                  id="impact-note-{{ block.id }}"
                  class="impact-note"
                  style="background: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}; display: flex; align-items: center; gap: 15px; padding: 0px 10px;"
                  {{ block.shopify_attributes }}
                >
                  <div class="impact-note__icon">
                    {% if block.settings.icon != blank -%}
                      <img src="{{ block.settings.icon | image_url: width: 64 }}" width="64" height="64">
                    {%- else -%}
                      
                    {%- endif %}
                  </div>
                  <p class="impact-note__text">{{ block.settings.text }}</p>
                </div>

              {%- when 'upsells' -%}
                <div class="upsell-two" {{ block.shopify_attributes }}>
                  <h3 class="upsell-two__title">{{ block.settings.title }}</h3>
                  {% for i in (1..2) %}
                    {% capture prod_key %}product_{{ i }}{% endcapture %}
                    {% assign up_prod = all_products[block.settings[prod_key]] %}
                    {% if up_prod != empty %}
                      <div class="upsell-card">
                        <div class="upsell-card__media">
                          <img src="{{ up_prod.featured_image | image_url: width: 200 }}" loading="lazy">
                        </div>
                        <div class="upsell-card__main">
                          <h4 class="upsell-card__name">{{ up_prod.title }}</h4>
                          <div class="upsell-price-with-button">
                            <div class="upsell-card__price">
                              <span class="upsell-card__sale">{{ up_prod.price | money }}</span>
                            </div>
                            <form method="post" action="/cart/add">
                              <input
                                type="hidden"
                                name="id"
                                value="{{ up_prod.selected_or_first_available_variant.id }}"
                              >
                              <button type="submit" class="upsell-card__atc">Add</button>
                            </form>
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  {% endfor %}
                </div>

              {%- when 'benefits_grid' -%}
                <div class="benefits-grid" id="benefits-{{ block.id }}" {{ block.shopify_attributes }}>
                  <style>
                    #benefits-{{ block.id }} { margin: 24px 0; color: {{ block.settings.text_color }}; }
                    #benefits-{{ block.id }} .benefits-grid__list { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
                    #benefits-{{ block.id }} .benefits-grid__item { display: flex; align-items: center; gap: 10px; }
                    #benefits-{{ block.id }} img, #benefits-{{ block.id }} svg { width: 24px; height: 24px; }
                    #benefits-{{ block.id }} p { margin: 0; font-size: 13px; line-height: 1.3; }
                  </style>
                  <div class="benefits-grid__list">
                    {% for i in (1..4) %}
                      {% capture icon_key %}icon_{{ i }}{% endcapture %}
                      {% capture text_key %}text_{{ i }}{% endcapture %}
                      {% if block.settings[text_key] != blank %}
                        <div class="benefits-grid__item">
                          <div class="benefits-grid__icon">
                            {% if block.settings[icon_key] != blank %}
                              <img
                                src="{{ block.settings[icon_key] | image_url: width: 48 }}"
                                width="24"
                                height="24"
                                loading="lazy"
                              >
                            {% else %}
                              <svg
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                              >
                                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2"/><path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                            {% endif %}
                          </div>
                          <div style="font-size: 14px; line-height: 1.5;" class="benefits-grid__text">
                            {{ block.settings[text_key] }}
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>

              {%- when 'scrolling_icons' -%}
                <div
                  id="pf-icons-{{ block.id }}"
                  class="pf-wrap"
                  style="color:{{ block.settings.text_color }}"
                  {{ block.shopify_attributes }}
                >
                  <div class="pf-track" id="pf-track-{{ block.id }}">
                    {% for i in (1..8) %}
                      {% capture icon_key %}icon_{{ i }}{% endcapture %}
                      {% capture label_key %}label_{{ i }}{% endcapture %}
                      {% if block.settings[label_key] != blank %}
                        <div class="pf-item">
                          <div class="pf-icon">
                            {% if block.settings[icon_key] != blank %}
                              <img
                                src="{{ block.settings[icon_key] | image_url: width: 80 }}"
                                width="40"
                                height="40"
                                loading="lazy"
                              >
                            {% else %}
                              <img
                                src="https://cdn.shopify.com/s/files/1/0628/3503/files/check-mark.svg?v=1666191763"
                                width="40"
                                height="40"
                              >
                            {% endif %}
                          </div>
                          <div class="pf-text">{{ block.settings[label_key] }}</div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <div class="pf-progress"><div class="pf-bar" id="pf-bar-{{ block.id }}"></div></div>
                  <script>
                    (function () {
                      const track = document.getElementById('pf-track-{{ block.id }}');
                      const bar = document.getElementById('pf-bar-{{ block.id }}');
                      if (track && bar) {
                        track.addEventListener('scroll', function () {
                          const scrollLeft = track.scrollLeft;
                          const maxScroll = track.scrollWidth - track.clientWidth;
                          const width = (scrollLeft / maxScroll) * 100;
                          bar.style.width = width + '%';
                        });
                      }
                    })();
                  </script>
                </div>

              {%- when 'review_highlights' -%}
                <div class="rh-wrap" {{ block.shopify_attributes }}>
                  <div class="rh-stars">
                    {% for i in (1..5) %}
                      <svg viewBox="0 0 14 14" fill="currentColor">
                        <path d="M7 0L8.57 5H14L9.5 8.2L11.1 14L7 10.5L2.9 14L4.5 8.2L0 5H5.43L7 0Z"/>
                      </svg>
                    {% endfor %}
                  </div>
                  <div class="rh-head">
                    {% if block.settings.avatar != blank %}
                      <img class="rh-avatar" src="{{ block.settings.avatar | image_url: width: 80 }}">
                    {% endif %}
                    <div>
                      <div class="rh-name">{{ block.settings.author }}</div>
                      <div class="rh-role">{{ block.settings.role }}</div>
                    </div>
                  </div>
                  <p class="rh-text">"{{ block.settings.text }}"</p>
                </div>

              {%- when 'icon-with-text' -%}
                {% render 'icon-with-text', block: block %}

              {%- when 'complementary' -%}
                <product-recommendations
                  class="complementary-products quick-add-hidden"
                  data-url="{{ routes.product_recommendations_url }}?limit={{ block.settings.product_list_limit }}&intent=complementary"
                  data-section-id="{{ section.id }}"
                  data-product-id="{{ product.id }}"
                >
                </product-recommendations>
            {%- endcase -%}
          {%- endfor -%}
          <a href="{{ product.url }}" class="link product__view-details animate-arrow">
            {{ 'products.product.view_full_details' | t }}
            {{- 'icon-arrow.svg' | inline_asset_content -}}
          </a>
        </section>
      </div>
    </div>

    {% render 'product-media-modal', variant_images: variant_images %}

    {% assign popups = section.blocks | where: 'type', 'popup' %}
    {%- for block in popups -%}
      <modal-dialog id="PopupModal-{{ block.id }}" class="product-popup-modal" {{ block.shopify_attributes }}>
        <div
          role="dialog"
          aria-label="{{ block.settings.text }}"
          aria-modal="true"
          class="product-popup-modal__content"
          tabindex="-1"
        >
          <button
            id="ModalClose-{{ block.id }}"
            type="button"
            class="product-popup-modal__toggle"
            aria-label="{{ 'accessibility.close' | t }}"
          >
            {{- 'icon-close.svg' | inline_asset_content -}}
          </button>
          <div class="product-popup-modal__content-info">
            <h1 class="h2">{{ block.settings.page.title | escape }}</h1>
            {{ block.settings.page.content }}
          </div>
        </div>
      </modal-dialog>
    {%- endfor -%}

    {%- if product.media.size > 0 -%}
      <script src="{{ 'product-modal.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'media-gallery.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if first_3d_model -%}
      <script type="application/json" id="ProductJSON-{{ product.id }}">
        {{ product.media | where: 'media_type', 'model' | json }}
      </script>
      <script src="{{ 'product-model.js' | asset_url }}" defer></script>
    {%- endif -%}

    <script type="application/ld+json">
      {{ product | structured_data }}
    </script>
  </div>

  <div id="sg-modal" class="sg-modal">
    <div class="sg-content">
      <button
        type="button"
        onclick="toggleSizeGuide(false)"
        style="position: absolute; right: 15px; top: 15px; background: none; border: none; font-size: 20px; cursor: pointer; color: #000;"
      >
        
      </button>
      <h2 style="margin-top:0; color:#000;">Size Guide</h2>
      <div class="sg-switch-wrap">
        <button class="sg-btn-switch active" onclick="switchUnit('in')">IN</button
        ><button class="sg-btn-switch" onclick="switchUnit('cm')">CM</button>
      </div>
      <img
        src="https://cdn.shopify.com/s/files/1/0742/4635/7257/files/Frame_1171274894.png?v=1756269962"
        style="width:100%; height:auto; margin-bottom:15px; border-radius: 8px;"
      >
      <table style="width:100%; border-collapse: collapse; font-size: 14px;" id="sg-table-in">
        <tr style="background:#f4f4f4;">
          <th style="padding:10px; border:1px solid #eee;">Size</th>
          <th style="padding:10px; border:1px solid #eee;">Diameter</th>
          <th style="padding:10px; border:1px solid #eee;">Length</th>
        </tr>
        <tr>
          <td style="padding:10px; border:1px solid #eee;">Mini</td>
          <td style="padding:10px; border:1px solid #eee;">9.5"</td>
          <td style="padding:10px; border:1px solid #eee;">18.5"</td>
        </tr>
        <tr>
          <td style="padding:10px; border:1px solid #eee;">Standard</td>
          <td style="padding:10px; border:1px solid #eee;">10.2"</td>
          <td style="padding:10px; border:1px solid #eee;">18.9"</td>
        </tr>
      </table>
      <table style="width:100%; border-collapse: collapse; font-size: 14px; display:none;" id="sg-table-cm">
        <tr style="background:#f4f4f4;">
          <th style="padding:10px; border:1px solid #eee;">Size</th>
          <th style="padding:10px; border:1px solid #eee;">Diameter</th>
          <th style="padding:10px; border:1px solid #eee;">Length</th>
        </tr>
        <tr>
          <td style="padding:10px; border:1px solid #eee;">Mini</td>
          <td style="padding:10px; border:1px solid #eee;">24 cm</td>
          <td style="padding:10px; border:1px solid #eee;">47 cm</td>
        </tr>
        <tr>
          <td style="padding:10px; border:1px solid #eee;">Standard</td>
          <td style="padding:10px; border:1px solid #eee;">26 cm</td>
          <td style="padding:10px; border:1px solid #eee;">48 cm</td>
        </tr>
      </table>
    </div>
  </div>
  <script>
    function toggleSizeGuide(show) {
      const modal = document.getElementById('sg-modal');
      if (modal) {
        modal.classList.toggle('is-open', show);
      }
    }
    function switchUnit(unit) {
      document.querySelectorAll('.sg-btn-switch').forEach((b) => b.classList.remove('active'));
      event.target.classList.add('active');
      const tableIn = document.getElementById('sg-table-in');
      const tableCm = document.getElementById('sg-table-cm');
      if (unit === 'in') {
        tableIn.style.display = 'table';
        tableCm.style.display = 'none';
      } else {
        tableIn.style.display = 'none';
        tableCm.style.display = 'table';
      }
    }
    document.addEventListener('DOMContentLoaded', function () {
      const modal = document.getElementById('sg-modal');
      if (modal) {
        modal.addEventListener('click', function (e) {
          if (e.target === modal) toggleSizeGuide(false);
        });
      }
    });
  </script>
</product-info>

{% schema %}
{
  "name": "t:sections.main-product.name",
  "tag": "section",
  "class": "section",
  "blocks": [
    { "type": "@app" },
    {
      "type": "shipping_promise_bar",
      "name": "Shipping Promise Bar",
      "settings": [
        {
          "type": "header",
          "content": "Colors & Style"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background Color",
          "default": "#03231A"
        },
        {
          "type": "color",
          "id": "border_color",
          "label": "Border Color",
          "default": "transparent"
        },
        {
          "type": "color",
          "id": "divider_color",
          "label": "Divider Color",
          "default": "rgba(255,255,255,0.08)"
        },
        {
          "type": "range",
          "id": "margin_top",
          "min": 0,
          "max": 60,
          "step": 2,
          "unit": "px",
          "label": "Margin Top",
          "default": 16
        },
        {
          "type": "range",
          "id": "margin_bottom",
          "min": 0,
          "max": 60,
          "step": 2,
          "unit": "px",
          "label": "Margin Bottom",
          "default": 16
        },
        {
          "type": "header",
          "content": "Left Side (Shipping Info)"
        },
        {
          "type": "text",
          "id": "label_text",
          "label": "Label Text",
          "default": "Ships By"
        },
        {
          "type": "color",
          "id": "label_color",
          "label": "Label Color",
          "default": "#D4C7B4"
        },
        {
          "type": "range",
          "id": "fs_label",
          "min": 10,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Label Font Size",
          "default": 16
        },
        {
          "type": "text",
          "id": "date_text",
          "label": "Date Text",
          "default": "Jan 4th"
        },
        {
          "type": "color",
          "id": "date_color",
          "label": "Date Color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "fs_date",
          "min": 12,
          "max": 40,
          "step": 1,
          "unit": "px",
          "label": "Date Font Size",
          "default": 20
        },
        {
          "type": "header",
          "content": "Right Side (Icon List)"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "List Text Color",
          "default": "#D4C7B4"
        },
        {
          "type": "range",
          "id": "fs_list",
          "min": 8,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "List Font Size",
          "default": 12
        },
        {
          "type": "range",
          "id": "icon_size",
          "min": 10,
          "max": 50,
          "step": 2,
          "unit": "px",
          "label": "Icon Size",
          "default": 24
        },
        {
          "type": "header",
          "content": "Item 1"
        },
        {
          "type": "image_picker",
          "id": "icon_1",
          "label": "Icon 1"
        },
        {
          "type": "text",
          "id": "default_icon_1",
          "label": "Default URL 1",
          "default": "//taimatitanium.com/cdn/shop/files/icons_26.svg?v=1754881915",
          "info": "Fallback if image picker is empty"
        },
        {
          "type": "text",
          "id": "text_1",
          "label": "Text 1",
          "default": "FREE Shipping & Easy Returns"
        },
        {
          "type": "header",
          "content": "Item 2"
        },
        {
          "type": "image_picker",
          "id": "icon_2",
          "label": "Icon 2"
        },
        {
          "type": "text",
          "id": "default_icon_2",
          "label": "Default URL 2",
          "default": "//taimatitanium.com/cdn/shop/files/icons_27.svg?v=1754881940",
          "info": "Fallback if image picker is empty"
        },
        {
          "type": "text",
          "id": "text_2",
          "label": "Text 2",
          "default": "30-Day-Guarantee"
        },
        {
          "type": "header",
          "content": "Item 3"
        },
        {
          "type": "image_picker",
          "id": "icon_3",
          "label": "Icon 3"
        },
        {
          "type": "text",
          "id": "default_icon_3",
          "label": "Default URL 3",
          "default": "//taimatitanium.com/cdn/shop/files/icons_28.svg?v=1754881963",
          "info": "Fallback if image picker is empty"
        },
        {
          "type": "text",
          "id": "text_3",
          "label": "Text 3",
          "default": "Lifetime Warranty"
        },
        {
          "type": "header",
          "content": "Item 4"
        },
        {
          "type": "image_picker",
          "id": "icon_4",
          "label": "Icon 4"
        },
        {
          "type": "text",
          "id": "default_icon_4",
          "label": "Default URL 4",
          "default": "//taimatitanium.com/cdn/shop/files/icons_29.svg?v=1754881985",
          "info": "Fallback if image picker is empty"
        },
        {
          "type": "text",
          "id": "text_4",
          "label": "Text 4",
          "default": "100% Toxin-Free Guarantee"
        }
      ]
    },
    {
      "type": "product_icons_block",
      "name": "Icons Scroller (Block)",
      "settings": [
        {
          "type": "header",
          "content": "Style Settings"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#D4C7B4"
        },
        {
          "type": "color",
          "id": "bar_color",
          "label": "Progress Bar Color",
          "default": "#333333"
        },
        {
          "type": "range",
          "id": "margin_top",
          "min": 0,
          "max": 50,
          "step": 2,
          "unit": "px",
          "label": "Margin Top",
          "default": 10
        },
        {
          "type": "range",
          "id": "margin_bottom",
          "min": 0,
          "max": 50,
          "step": 2,
          "unit": "px",
          "label": "Margin Bottom",
          "default": 10
        },
        {
          "type": "header",
          "content": "Icon 1"
        },
        {
          "type": "image_picker",
          "id": "icon_1",
          "label": "Image 1"
        },
        {
          "type": "text",
          "id": "text_1_l1",
          "label": "Line 1",
          "default": "Lifetime"
        },
        {
          "type": "text",
          "id": "text_1_l2",
          "label": "Line 2",
          "default": "Warranty"
        },
        {
          "type": "header",
          "content": "Icon 2"
        },
        {
          "type": "image_picker",
          "id": "icon_2",
          "label": "Image 2"
        },
        {
          "type": "text",
          "id": "text_2_l1",
          "label": "Line 1",
          "default": "Metal"
        },
        {
          "type": "text",
          "id": "text_2_l2",
          "label": "Line 2",
          "default": "Utensils-Safe"
        },
        {
          "type": "header",
          "content": "Icon 3"
        },
        {
          "type": "image_picker",
          "id": "icon_3",
          "label": "Image 3"
        },
        {
          "type": "text",
          "id": "text_3_l1",
          "label": "Line 1",
          "default": "Oven-"
        },
        {
          "type": "text",
          "id": "text_3_l2",
          "label": "Line 2",
          "default": "Safe"
        },
        {
          "type": "header",
          "content": "Icon 4"
        },
        {
          "type": "image_picker",
          "id": "icon_4",
          "label": "Image 4"
        },
        {
          "type": "text",
          "id": "text_4_l1",
          "label": "Line 1",
          "default": "Dishwasher"
        },
        {
          "type": "text",
          "id": "text_4_l2",
          "label": "Line 2",
          "default": "Safe"
        },
        {
          "type": "header",
          "content": "Icon 5"
        },
        {
          "type": "image_picker",
          "id": "icon_5",
          "label": "Image 5"
        },
        {
          "type": "text",
          "id": "text_5_l1",
          "label": "Line 1",
          "default": "No Heavy"
        },
        {
          "type": "text",
          "id": "text_5_l2",
          "label": "Line 2",
          "default": "Metals"
        },
        {
          "type": "header",
          "content": "Icon 6"
        },
        {
          "type": "image_picker",
          "id": "icon_6",
          "label": "Image 6"
        },
        {
          "type": "text",
          "id": "text_6_l1",
          "label": "Line 1",
          "default": "Corrosion"
        },
        {
          "type": "text",
          "id": "text_6_l2",
          "label": "Line 2",
          "default": "Resistant"
        },
        {
          "type": "header",
          "content": "Icon 7"
        },
        {
          "type": "image_picker",
          "id": "icon_7",
          "label": "Image 7"
        },
        {
          "type": "text",
          "id": "text_7_l1",
          "label": "Line 1",
          "default": "Induction"
        },
        {
          "type": "text",
          "id": "text_7_l2",
          "label": "Line 2",
          "default": "Ready"
        },
        {
          "type": "header",
          "content": "Icon 8"
        },
        {
          "type": "image_picker",
          "id": "icon_8",
          "label": "Image 8"
        },
        {
          "type": "text",
          "id": "text_8_l1",
          "label": "Line 1",
          "default": "Stay-Cool"
        },
        {
          "type": "text",
          "id": "text_8_l2",
          "label": "Line 2",
          "default": "Handle"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.main-product.blocks.text.name",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "t:sections.main-product.blocks.text.settings.text.default",
          "label": "t:sections.main-product.blocks.text.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            { "value": "body", "label": "Body" },
            { "value": "subtitle", "label": "Subtitle" },
            { "value": "uppercase", "label": "Uppercase" }
          ],
          "default": "body",
          "label": "t:sections.main-product.blocks.text.settings.text_style.label"
        },
        { "type": "header", "content": "Custom Settings" },
        { "type": "color", "id": "color_text", "label": "Text Color", "default": "#121212" },
        {
          "type": "range",
          "id": "font_size",
          "min": 10,
          "max": 40,
          "step": 1,
          "unit": "px",
          "label": "Font Size",
          "default": 16
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.main-product.blocks.title.name",
      "limit": 1,
      "settings": [
        { "type": "header", "content": "Custom Settings" },
        { "type": "color", "id": "color_text", "label": "Text Color", "default": "#121212" },
        {
          "type": "range",
          "id": "font_size",
          "min": 18,
          "max": 60,
          "step": 1,
          "unit": "px",
          "label": "Font Size",
          "default": 30
        }
      ]
    },
    {
      "type": "price",
      "name": "t:sections.main-product.blocks.price.name",
      "limit": 1,
      "settings": [
        { "type": "header", "content": "Custom Settings" },
        { "type": "color", "id": "bg_color", "label": "Container Background", "default": "transparent" },
        { "type": "color", "id": "price_color", "label": "Main Price Color", "default": "#121212" },
        {
          "type": "range",
          "id": "main_price_size",
          "min": 14,
          "max": 60,
          "step": 1,
          "unit": "px",
          "label": "Main Price Font Size",
          "default": 24
        },
        { "type": "header", "content": "Sale & Compare" },
        { "type": "color", "id": "sale_price_color", "label": "Sale Price Color", "default": "#E23223" },
        { "type": "color", "id": "compare_price_color", "label": "Compare Price Color", "default": "#888888" },
        {
          "type": "range",
          "id": "compare_price_size",
          "min": 12,
          "max": 40,
          "step": 1,
          "unit": "px",
          "label": "Compare Price Font Size",
          "default": 18
        },
        { "type": "text", "id": "badge_text", "label": "Badge Text" }
      ]
    },
    {
      "type": "sku",
      "name": "t:sections.main-product.blocks.sku.name",
      "limit": 1,
      "settings": [
        { "type": "color", "id": "color_text", "label": "Text Color", "default": "#121212" },
        {
          "type": "range",
          "id": "font_size",
          "min": 10,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Font Size",
          "default": 14
        }
      ]
    },
    {
      "type": "inventory",
      "name": "t:sections.main-product.blocks.inventory.name",
      "limit": 1,
      "settings": [
        {
          "type": "range",
          "id": "inventory_threshold",
          "label": "Threshold",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 10
        },
        { "type": "checkbox", "id": "show_inventory_quantity", "label": "Show Count", "default": true }
      ]
    },
    { "type": "quantity_selector", "name": "t:sections.main-product.blocks.quantity_selector.name", "limit": 1 },
    {
      "type": "variant_picker",
      "name": "t:sections.main-product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            { "value": "dropdown", "label": "Dropdown" },
            { "value": "button", "label": "Button" }
          ],
          "default": "button",
          "label": "Picker Type"
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.main-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        { "type": "checkbox", "id": "show_dynamic_checkout", "default": true, "label": "Show Dynamic Checkout" },
        { "type": "checkbox", "id": "show_gift_card_recipient", "default": true, "label": "Show Gift Card Recipient" },
        { "type": "header", "content": "Add to Cart Styling" },
        { "type": "color", "id": "atc_bg", "label": "Background", "default": "#000000" },
        { "type": "color", "id": "atc_text", "label": "Text Color", "default": "#ffffff" },
        { "type": "color", "id": "atc_border", "label": "Border Color", "default": "#000000" },
        { "type": "range", "id": "atc_font_size", "label": "Font Size", "min": 12, "max": 24, "default": 16 },
        { "type": "header", "content": "Hover State" },
        { "type": "color", "id": "atc_bg_hover", "label": "Hover Background", "default": "#333333" },
        { "type": "color", "id": "atc_text_hover", "label": "Hover Text", "default": "#ffffff" }
      ]
    },
    {
      "type": "description",
      "name": "t:sections.main-product.blocks.description.name",
      "limit": 1,
      "settings": [
        { "type": "header", "content": "Custom Settings" },
        { "type": "color", "id": "color_text", "label": "Text Color", "default": "#121212" },
        {
          "type": "range",
          "id": "font_size",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Font Size",
          "default": 16
        }
      ]
    },
    {
      "type": "share",
      "name": "t:sections.main-product.blocks.share.name",
      "limit": 1,
      "settings": [{ "type": "text", "id": "share_label", "label": "Label", "default": "Share" }]
    },
    {
      "type": "custom_liquid",
      "name": "t:sections.custom-liquid.name",
      "settings": [{ "type": "liquid", "id": "custom_liquid", "label": "Liquid Code" }]
    },
    {
      "type": "collapsible_tab",
      "name": "t:sections.main-product.blocks.collapsible_tab.name",
      "settings": [
        { "type": "text", "id": "heading", "default": "Heading", "label": "Heading" },
        { "type": "image_picker", "id": "custom_icon", "label": "Custom Icon (Upload)" },
        {
          "type": "select",
          "id": "icon",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "apple", "label": "Apple" },
            { "value": "check_mark", "label": "Check Mark" }
          ],
          "default": "check_mark",
          "label": "Icon (Fallback)"
        },
        { "type": "richtext", "id": "content", "label": "Standard Content" },
        { "type": "page", "id": "page", "label": "Page Content" },

        { "type": "header", "content": "Review Settings" },
        { "type": "checkbox", "id": "enable_reviews", "label": "Enable Reviews Layout", "default": false },
        { "type": "color", "id": "review_name_color", "label": "Name Color", "default": "#121212" },
        { "type": "color", "id": "review_role_color", "label": "Role/Info Color", "default": "#555555" },
        { "type": "color", "id": "review_text_color", "label": "Text Color", "default": "#333333" },

        { "type": "header", "content": "Review 1" },
        { "type": "image_picker", "id": "rev_img_1", "label": "Image 1" },
        { "type": "text", "id": "rev_name_1", "label": "Name 1" },
        { "type": "text", "id": "rev_role_1", "label": "Short Info 1" },
        { "type": "textarea", "id": "rev_text_1", "label": "Review 1" },

        { "type": "header", "content": "Review 2" },
        { "type": "image_picker", "id": "rev_img_2", "label": "Image 2" },
        { "type": "text", "id": "rev_name_2", "label": "Name 2" },
        { "type": "text", "id": "rev_role_2", "label": "Short Info 2" },
        { "type": "textarea", "id": "rev_text_2", "label": "Review 2" },

        { "type": "header", "content": "Review 3" },
        { "type": "image_picker", "id": "rev_img_3", "label": "Image 3" },
        { "type": "text", "id": "rev_name_3", "label": "Name 3" },
        { "type": "text", "id": "rev_role_3", "label": "Short Info 3" },
        { "type": "textarea", "id": "rev_text_3", "label": "Review 3" },

        { "type": "header", "content": "Review 4" },
        { "type": "image_picker", "id": "rev_img_4", "label": "Image 4" },
        { "type": "text", "id": "rev_name_4", "label": "Name 4" },
        { "type": "text", "id": "rev_role_4", "label": "Short Info 4" },
        { "type": "textarea", "id": "rev_text_4", "label": "Review 4" },

        { "type": "header", "content": "Review 5" },
        { "type": "image_picker", "id": "rev_img_5", "label": "Image 5" },
        { "type": "text", "id": "rev_name_5", "label": "Name 5" },
        { "type": "text", "id": "rev_role_5", "label": "Short Info 5" },
        { "type": "textarea", "id": "rev_text_5", "label": "Review 5" },

        { "type": "header", "content": "Review 6" },
        { "type": "image_picker", "id": "rev_img_6", "label": "Image 6" },
        { "type": "text", "id": "rev_name_6", "label": "Name 6" },
        { "type": "text", "id": "rev_role_6", "label": "Short Info 6" },
        { "type": "textarea", "id": "rev_text_6", "label": "Review 6" },

        { "type": "header", "content": "Review 7" },
        { "type": "image_picker", "id": "rev_img_7", "label": "Image 7" },
        { "type": "text", "id": "rev_name_7", "label": "Name 7" },
        { "type": "text", "id": "rev_role_7", "label": "Short Info 7" },
        { "type": "textarea", "id": "rev_text_7", "label": "Review 7" },

        { "type": "header", "content": "Review 8" },
        { "type": "image_picker", "id": "rev_img_8", "label": "Image 8" },
        { "type": "text", "id": "rev_name_8", "label": "Name 8" },
        { "type": "text", "id": "rev_role_8", "label": "Short Info 8" },
        { "type": "textarea", "id": "rev_text_8", "label": "Review 8" },

        { "type": "header", "content": "Review 9" },
        { "type": "image_picker", "id": "rev_img_9", "label": "Image 9" },
        { "type": "text", "id": "rev_name_9", "label": "Name 9" },
        { "type": "text", "id": "rev_role_9", "label": "Short Info 9" },
        { "type": "textarea", "id": "rev_text_9", "label": "Review 9" },

        { "type": "header", "content": "Review 10" },
        { "type": "image_picker", "id": "rev_img_10", "label": "Image 10" },
        { "type": "text", "id": "rev_name_10", "label": "Name 10" },
        { "type": "text", "id": "rev_role_10", "label": "Short Info 10" },
        { "type": "textarea", "id": "rev_text_10", "label": "Review 10" },

        { "type": "header", "content": "Review Link Button" },
        { "type": "text", "id": "review_link_text", "label": "Button Text", "default": "Read All Reviews" },
        { "type": "url", "id": "review_link_url", "label": "Button Link" },

        { "type": "header", "content": "Standard Button (Optional)" },
        { "type": "text", "id": "button_label", "label": "Standard Button Label" },
        { "type": "url", "id": "button_link", "label": "Standard Button Link" }
      ]
    },
    { "type": "rating", "name": "t:sections.main-product.blocks.rating.name", "limit": 1 },
    {
      "type": "complementary",
      "name": "t:sections.main-product.blocks.complementary_products.name",
      "limit": 1,
      "settings": [
        { "type": "text", "id": "block_heading", "default": "Pairs well with", "label": "Heading" },
        {
          "type": "range",
          "id": "product_list_limit",
          "min": 1,
          "max": 10,
          "step": 1,
          "default": 10,
          "label": "Max products to show"
        },
        {
          "type": "range",
          "id": "products_per_page",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 3,
          "label": "Products per page"
        }
      ]
    },
    {
      "type": "icon-with-text",
      "name": "t:sections.main-product.blocks.icon_with_text.name",
      "settings": [
        {
          "type": "select",
          "id": "layout",
          "options": [
            { "value": "horizontal", "label": "Horizontal" },
            { "value": "vertical", "label": "Vertical" }
          ],
          "default": "horizontal",
          "label": "Layout"
        }
      ]
    },
    {
      "type": "review_highlights",
      "name": "Review Highlights",
      "settings": [
        { "type": "image_picker", "id": "avatar", "label": "Avatar Image" },
        { "type": "text", "id": "author", "label": "Author Name", "default": "Dominique L." },
        { "type": "text", "id": "role", "label": "Role/Location", "default": "Michelin-Star Chef | Beverly Hills" },
        { "type": "textarea", "id": "text", "label": "Quote", "default": "This is a true kitchen workhorse." }
      ]
    },
    {
      "type": "benefits_grid",
      "name": "Benefits Grid (4 Icons)",
      "limit": 1,
      "settings": [
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#B0B0B0" },
        { "type": "image_picker", "id": "icon_1", "label": "Icon 1" },
        { "type": "inline_richtext", "id": "text_1", "label": "Text 1", "default": "No PFAS" },
        { "type": "image_picker", "id": "icon_2", "label": "Icon 2" },
        { "type": "inline_richtext", "id": "text_2", "label": "Text 2", "default": "Heat Resistant" },
        { "type": "image_picker", "id": "icon_3", "label": "Icon 3" },
        { "type": "inline_richtext", "id": "text_3", "label": "Text 3", "default": "Non-Stick" },
        { "type": "image_picker", "id": "icon_4", "label": "Icon 4" },
        { "type": "inline_richtext", "id": "text_4", "label": "Text 4", "default": "All Cooktops" }
      ]
    },
    {
      "type": "scrolling_icons",
      "name": "Scrolling Icons Bar",
      "settings": [
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#D4C7B4" },
        { "type": "image_picker", "id": "icon_1", "label": "Icon 1" },
        { "type": "text", "id": "label_1", "label": "Label 1" },
        { "type": "image_picker", "id": "icon_2", "label": "Icon 2" },
        { "type": "text", "id": "label_2", "label": "Label 2" },
        { "type": "image_picker", "id": "icon_3", "label": "Icon 3" },
        { "type": "text", "id": "label_3", "label": "Label 3" },
        { "type": "image_picker", "id": "icon_4", "label": "Icon 4" },
        { "type": "text", "id": "label_4", "label": "Label 4" }
      ]
    },
{
  "type": "bundle_widget",
  "name": "Bundle / Variants",
  "limit": 1,
  "settings": [
    { "type": "header", "content": "Variant Tabs (Top)" },
    { "type": "color", "id": "tab_text_inactive", "label": "Inactive Tab Text", "default": "#000000" },
    { "type": "color", "id": "tab_bg_inactive", "label": "Inactive Tab BG", "default": "transparent" },
    { "type": "color", "id": "tab_text_active", "label": "Active Tab Text", "default": "#000000" },
    { "type": "color", "id": "tab_bg_active", "label": "Active Tab BG", "default": "#F6F4F0" },
    { "type": "color", "id": "tab_border", "label": "Tabs Border Color", "default": "#454545" },

    { "type": "header", "content": "Variant Buttons (Color)" },
    { "type": "color", "id": "color_btn_bg", "label": "Color Btn BG", "default": "#F0F0F0" },
    { "type": "color", "id": "color_btn_text", "label": "Color Btn Text", "default": "#000000" },
    { "type": "color", "id": "color_btn_border", "label": "Color Btn Border", "default": "#DDDDDD" },
    { "type": "color", "id": "color_btn_active_bg", "label": "Color Active BG", "default": "#000000" },
    { "type": "color", "id": "color_btn_active_text", "label": "Color Active Text", "default": "#FFFFFF" },

    { "type": "header", "content": "Bundle Cards (Middle)" },
    { "type": "color", "id": "card_bg", "label": "Card Background", "default": "#F6F4F0" },
    { "type": "color", "id": "card_border", "label": "Card Border (Inactive)", "default": "#F6F4F0" },
    { "type": "color", "id": "card_text", "label": "Card Text Color", "default": "#000000" },
    { "type": "color", "id": "card_price_color", "label": "Card Price Color", "default": "#097350" },
    { "type": "color", "id": "active_card_bg", "label": "Active Card BG", "default": "#FFFFFF" },
    { "type": "color", "id": "active_card_border", "label": "Active Card Border", "default": "#097350" },

    { "type": "header", "content": "Bundle Badge Settings" },
    { "type": "color", "id": "badge_bg", "label": "Badge Background", "default": "#E7D9BF" },
    { "type": "color", "id": "badge_text", "label": "Badge Text Color", "default": "#000000" },
    { "type": "range", "id": "badge_font_size", "min": 8, "max": 16, "step": 1, "unit": "px", "label": "Badge Font Size", "default": 10 },

    { "type": "header", "content": "Bundle Text Typography" },
    { "type": "color", "id": "desc_color", "label": "Description Color", "default": "#555555" },
    { "type": "range", "id": "desc_font_size", "min": 10, "max": 18, "step": 1, "unit": "px", "label": "Description Font Size", "default": 12 },
    { "type": "color", "id": "info_color", "label": "Short Info Color", "default": "#444444" },
    { "type": "range", "id": "info_font_size", "min": 10, "max": 18, "step": 1, "unit": "px", "label": "Short Info Font Size", "default": 13 },
    { "type": "range", "id": "price_font_size", "min": 12, "max": 24, "step": 1, "unit": "px", "label": "Price Font Size", "default": 16 },
    { "type": "color", "id": "compare_note_color", "label": "Value Note Color", "default": "#888888" },
    { "type": "range", "id": "compare_note_size", "min": 10, "max": 18, "step": 1, "unit": "px", "label": "Value Note Size", "default": 12 },

    { "type": "header", "content": "Add to Cart Button" },
    { "type": "color", "id": "btn_bg", "label": "Button Background", "default": "#097350" },
    { "type": "color", "id": "btn_text", "label": "Button Text", "default": "#FFFFFF" },
    { "type": "color", "id": "btn_hover_bg", "label": "Button Hover BG", "default": "#075e41" },
    { "type": "color", "id": "btn_hover_text", "label": "Button Hover Text", "default": "#FFFFFF" },
      
    { "type": "header", "content": "Content / Labels" },
    { "type": "color", "id": "label_color", "label": "Top Label Color", "default": "#000000" },
    { "type": "text", "id": "size_label", "label": "Label Text", "default": "Select Size Variant" },
    { "type": "text", "id": "size_guide_text", "label": "Guide Link Text", "default": "Size Guide" },
      
    { "type": "header", "content": "Guarantee Text" },
    { "type": "color", "id": "guarantee_color", "label": "Text Color", "default": "#000000" },
    { "type": "text", "id": "guarantee_text", "label": "Guarantee Text", "default": "Guaranteed Safe & Secure Checkout" },
      
    { "type": "header", "content": "Bundles Logic" },
    { "type": "checkbox", "id": "enable_bundles", "label": "Enable Bundle Cards", "default": true },
    { "type": "text", "id": "bundles_heading", "label": "Bundles Heading", "default": "Or Select Bundle & Save" },
    
    { "type": "header", "content": "Bundle 1" },
    { "type": "product", "id": "bundle_product_1", "label": "Product" },
    { "type": "text", "id": "bundle_title_1", "label": "Title Override" },
    { "type": "text", "id": "bundle_info_1", "label": "Short Info (New)", "default": "Save 10% Instantly" },
    { "type": "text", "id": "bundle_desc_1", "label": "Description" },
    { "type": "text", "id": "bundle_badge_1", "label": "Badge", "default": "MOST POPULAR" },
    { "type": "checkbox", "id": "enable_custom_img_1", "label": "Enable Custom Images (Bundle 1)", "default": false },
    { "type": "image_picker", "id": "b1_img_1", "label": "Custom Image 1" },
    { "type": "image_picker", "id": "b1_img_2", "label": "Custom Image 2" },
    { "type": "image_picker", "id": "b1_img_3", "label": "Custom Image 3" },
    { "type": "image_picker", "id": "b1_img_4", "label": "Custom Image 4" },
    { "type": "image_picker", "id": "b1_img_5", "label": "Custom Image 5" },
    { "type": "image_picker", "id": "b1_img_6", "label": "Custom Image 6" },
    
    { "type": "header", "content": "Bundle 2" },
    { "type": "product", "id": "bundle_product_2", "label": "Product" },
    { "type": "text", "id": "bundle_title_2", "label": "Title Override" },
    { "type": "text", "id": "bundle_info_2", "label": "Short Info (New)", "default": "Best Value" },
    { "type": "text", "id": "bundle_desc_2", "label": "Description" },
    { "type": "text", "id": "bundle_badge_2", "label": "Badge", "default": "GREAT VALUE" },
    { "type": "checkbox", "id": "enable_custom_img_2", "label": "Enable Custom Images (Bundle 2)", "default": false },
    { "type": "image_picker", "id": "b2_img_1", "label": "Custom Image 1" },
    { "type": "image_picker", "id": "b2_img_2", "label": "Custom Image 2" },
    { "type": "image_picker", "id": "b2_img_3", "label": "Custom Image 3" },
    { "type": "image_picker", "id": "b2_img_4", "label": "Custom Image 4" },
    { "type": "image_picker", "id": "b2_img_5", "label": "Custom Image 5" },
    { "type": "image_picker", "id": "b2_img_6", "label": "Custom Image 6" },
    
    { "type": "header", "content": "Bundle 3" },
    { "type": "product", "id": "bundle_product_3", "label": "Product" },
    { "type": "text", "id": "bundle_title_3", "label": "Title Override" },
    { "type": "text", "id": "bundle_info_3", "label": "Short Info (New)", "default": "Limited Offer" },
    { "type": "text", "id": "bundle_desc_3", "label": "Description" },
    { "type": "text", "id": "bundle_badge_3", "label": "Badge", "default": "LIMITED OFFER" },
    { "type": "checkbox", "id": "enable_custom_img_3", "label": "Enable Custom Images (Bundle 3)", "default": false },
    { "type": "image_picker", "id": "b3_img_1", "label": "Custom Image 1" },
    { "type": "image_picker", "id": "b3_img_2", "label": "Custom Image 2" },
    { "type": "image_picker", "id": "b3_img_3", "label": "Custom Image 3" },
    { "type": "image_picker", "id": "b3_img_4", "label": "Custom Image 4" },
    { "type": "image_picker", "id": "b3_img_5", "label": "Custom Image 5" },
    { "type": "image_picker", "id": "b3_img_6", "label": "Custom Image 6" }
  ]
},
    {
      "type": "shipping_bar",
      "name": "Shipping Bar",
      "settings": [
        { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#03231A" },
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#D4C7B4" },
        { "type": "text", "id": "alert_text", "label": "Left Label", "default": "Ships By" },
        { "type": "text", "id": "text_1", "label": "Text 1", "default": "FREE Shipping" },
        { "type": "text", "id": "text_2", "label": "Text 2", "default": "Lifetime Warranty" }
      ]
    },
    {
      "type": "info_tabs",
      "name": "Advanced Tabs (PIT)",
      "limit": 1,
      "settings": [
        { "type": "header", "content": "Tab 1 Settings" },
        { "type": "text", "id": "tab_1_label", "label": "Tab 1 Label", "default": "Details" },
        { "type": "richtext", "id": "tab_1_content", "label": "Tab 1 Content" },
        { "type": "image_picker", "id": "tab_1_image", "label": "Tab 1 Image (Bottom)" },

        { "type": "header", "content": "Tab 2 Settings" },
        { "type": "text", "id": "tab_2_label", "label": "Tab 2 Label", "default": "Specifications" },
        { "type": "richtext", "id": "tab_2_content", "label": "Tab 2 Content" },
        { "type": "image_picker", "id": "tab_2_image", "label": "Tab 2 Image (Bottom)" },

        { "type": "header", "content": "Tab 3 Settings" },
        { "type": "text", "id": "tab_3_label", "label": "Tab 3 Label", "default": "Shipping" },
        { "type": "richtext", "id": "tab_3_content", "label": "Tab 3 Content" },
        { "type": "image_picker", "id": "tab_3_image", "label": "Tab 3 Image (Bottom)" }
      ]
    },
    {
      "type": "accordion_custom",
      "name": "Accordion (Custom)",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Details" },
        { "type": "image_picker", "id": "icon", "label": "Icon" },
        { "type": "richtext", "id": "content", "label": "Content" },
        { "type": "text", "id": "button_label", "label": "Button Label", "default": "See More" },
        { "type": "url", "id": "button_link", "label": "Button Link" }
      ]
    },
    {
      "type": "impact_note",
      "name": "Impact Note",
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Custom Icon" },
        { "type": "color", "id": "bg_color", "label": "Background", "default": "#03231A" },
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#D4C7B4" },
        { "type": "textarea", "id": "text", "label": "Text", "default": "Part of your order helps create the future." }
      ]
    },
    {
      "type": "upsells",
      "name": "Upsell Products",
      "settings": [
        { "type": "text", "id": "title", "label": "Heading", "default": "Complete Your Kitchen" },
        { "type": "product", "id": "product_1", "label": "Product 1" },
        { "type": "product", "id": "product_2", "label": "Product 2" }
      ]
    },
    {
      "type": "sticky_atc",
      "name": "Sticky ATC",
      "limit": 1,
      "settings": [
        { "type": "text", "id": "alert_text", "label": "Alert Text", "default": "ALMOST SOLD OUT" },
        { "type": "text", "id": "btn_text", "label": "Button Text", "default": "ADD TO CART" }
      ]
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "t:sections.main-product.settings.enable_sticky_info.label"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.main-product.settings.header.content"
    },
    {
      "type": "select",
      "id": "media_size",
      "options": [
        { "value": "small", "label": "t:sections.main-product.settings.media_size.options__1.label" },
        { "value": "medium", "label": "t:sections.main-product.settings.media_size.options__2.label" },
        { "value": "large", "label": "t:sections.main-product.settings.media_size.options__3.label" }
      ],
      "default": "large",
      "label": "t:sections.main-product.settings.media_size.label"
    },
    {
      "type": "checkbox",
      "id": "constrain_to_viewport",
      "default": true,
      "label": "t:sections.main-product.settings.constrain_to_viewport.label"
    },
    {
      "type": "select",
      "id": "media_fit",
      "options": [
        { "value": "contain", "label": "t:sections.main-product.settings.media_fit.options__1.label" },
        { "value": "cover", "label": "t:sections.main-product.settings.media_fit.options__2.label" }
      ],
      "default": "contain",
      "label": "t:sections.main-product.settings.media_fit.label"
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "options": [
        { "value": "stacked", "label": "t:sections.main-product.settings.gallery_layout.options__1.label" },
        { "value": "columns", "label": "t:sections.main-product.settings.gallery_layout.options__2.label" },
        { "value": "thumbnail", "label": "t:sections.main-product.settings.gallery_layout.options__3.label" },
        { "value": "thumbnail_slider", "label": "t:sections.main-product.settings.gallery_layout.options__4.label" }
      ],
      "default": "stacked",
      "label": "t:sections.main-product.settings.gallery_layout.label"
    },
    {
      "type": "select",
      "id": "mobile_thumbnails",
      "options": [
        { "value": "columns", "label": "t:sections.main-product.settings.mobile_thumbnails.options__1.label" },
        { "value": "show", "label": "t:sections.main-product.settings.mobile_thumbnails.options__2.label" },
        { "value": "hide", "label": "t:sections.main-product.settings.mobile_thumbnails.options__3.label" }
      ],
      "default": "hide",
      "label": "t:sections.main-product.settings.mobile_thumbnails.label"
    },
    {
      "type": "select",
      "id": "media_position",
      "options": [
        { "value": "left", "label": "t:sections.main-product.settings.media_position.options__1.label" },
        { "value": "right", "label": "t:sections.main-product.settings.media_position.options__2.label" }
      ],
      "default": "left",
      "label": "t:sections.main-product.settings.media_position.label"
    },
    {
      "type": "select",
      "id": "image_zoom",
      "options": [
        { "value": "lightbox", "label": "t:sections.main-product.settings.image_zoom.options__1.label" },
        { "value": "hover", "label": "t:sections.main-product.settings.image_zoom.options__2.label" },
        { "value": "none", "label": "t:sections.main-product.settings.image_zoom.options__3.label" }
      ],
      "default": "lightbox",
      "label": "t:sections.main-product.settings.image_zoom.label"
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "t:sections.main-product.settings.hide_variants.label"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "t:sections.main-product.settings.enable_video_looping.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
